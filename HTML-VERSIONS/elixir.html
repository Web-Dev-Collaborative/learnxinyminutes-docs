<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>elixir.html</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>Elixir is a modern functional language built on top of the Erlang VM. It’s fully compatible with Erlang, but features a more standard syntax and many more features.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb1-1" title="1"></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># Single line comments start with a number symbol.</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># There&#39;s no multi-line comment,</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># but you can stack multiple comments.</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># To use the elixir shell use the `iex` command.</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># Compile your modules with the `elixirc` command.</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co"># Both should be in your path if you installed elixir correctly.</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">## -- Basic types</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co"># There are numbers</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="dv">3</span>    <span class="co"># integer</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="bn">0x1F</span> <span class="co"># integer</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="fl">3.0</span>  <span class="co"># float</span></a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co"># Atoms, that are literals, a constant with name. They start with `:`.</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="va">:hello</span> <span class="co"># atom</span></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co"># Tuples that are stored contiguously in memory.</span></a>
<a class="sourceLine" id="cb1-25" title="25">{<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>} <span class="co"># tuple</span></a>
<a class="sourceLine" id="cb1-26" title="26"></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="co"># We can access a tuple element with the `elem` function:</span></a>
<a class="sourceLine" id="cb1-28" title="28">elem({<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}, <span class="dv">0</span>) <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co"># Lists that are implemented as linked lists.</span></a>
<a class="sourceLine" id="cb1-31" title="31">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>] <span class="co"># list</span></a>
<a class="sourceLine" id="cb1-32" title="32"></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="co"># We can access the head and tail of a list as follows:</span></a>
<a class="sourceLine" id="cb1-34" title="34">[head <span class="op">|</span> tail] <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb1-35" title="35">head <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-36" title="36">tail <span class="co">#=&gt; [2,3]</span></a>
<a class="sourceLine" id="cb1-37" title="37"></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co"># In elixir, just like in Erlang, the `=` denotes pattern matching and</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="co"># not an assignment.</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="co">#</span></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="co"># This means that the left-hand side (pattern) is matched against a</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co"># right-hand side.</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co">#</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co"># This is how the above example of accessing the head and tail of a list works.</span></a>
<a class="sourceLine" id="cb1-45" title="45"></a>
<a class="sourceLine" id="cb1-46" title="46"><span class="co"># A pattern match will error when the sides don&#39;t match, in this example</span></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="co"># the tuples have different sizes.</span></a>
<a class="sourceLine" id="cb1-48" title="48"><span class="co"># {a, b, c} = {1, 2} #=&gt; ** (MatchError) no match of right hand side value: {1,2}</span></a>
<a class="sourceLine" id="cb1-49" title="49"></a>
<a class="sourceLine" id="cb1-50" title="50"><span class="co"># There are also binaries</span></a>
<a class="sourceLine" id="cb1-51" title="51"><span class="op">&lt;&lt;</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span><span class="op">&gt;&gt;</span> <span class="co"># binary</span></a>
<a class="sourceLine" id="cb1-52" title="52"></a>
<a class="sourceLine" id="cb1-53" title="53"><span class="co"># Strings and char lists</span></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="st">&quot;hello&quot;</span> <span class="co"># string</span></a>
<a class="sourceLine" id="cb1-55" title="55"><span class="vs">&#39;hello&#39;</span> <span class="co"># char list</span></a>
<a class="sourceLine" id="cb1-56" title="56"></a>
<a class="sourceLine" id="cb1-57" title="57"><span class="co"># Multi-line strings</span></a>
<a class="sourceLine" id="cb1-58" title="58"><span class="st">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-59" title="59"><span class="st">I&#39;m a multi-line</span></a>
<a class="sourceLine" id="cb1-60" title="60"><span class="st">string.</span></a>
<a class="sourceLine" id="cb1-61" title="61"><span class="st">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-62" title="62"><span class="co">#=&gt; &quot;I&#39;m a multi-line\nstring.\n&quot;</span></a>
<a class="sourceLine" id="cb1-63" title="63"></a>
<a class="sourceLine" id="cb1-64" title="64"><span class="co"># Strings are all encoded in UTF-8:</span></a>
<a class="sourceLine" id="cb1-65" title="65"><span class="st">&quot;héllò&quot; #=&gt; &quot;</span>héllò&quot;</a>
<a class="sourceLine" id="cb1-66" title="66"></a>
<a class="sourceLine" id="cb1-67" title="67"><span class="co"># Strings are really just binaries, and char lists are just lists.</span></a>
<a class="sourceLine" id="cb1-68" title="68"><span class="op">&lt;&lt;</span>?a, ?b, ?c<span class="op">&gt;&gt;</span> <span class="co">#=&gt; &quot;abc&quot;</span></a>
<a class="sourceLine" id="cb1-69" title="69">[?a, ?b, ?c]   <span class="co">#=&gt; &#39;abc&#39;</span></a>
<a class="sourceLine" id="cb1-70" title="70"></a>
<a class="sourceLine" id="cb1-71" title="71"><span class="co"># `?a` in elixir returns the ASCII integer for the letter `a`</span></a>
<a class="sourceLine" id="cb1-72" title="72">?a <span class="co">#=&gt; 97</span></a>
<a class="sourceLine" id="cb1-73" title="73"></a>
<a class="sourceLine" id="cb1-74" title="74"><span class="co"># To concatenate lists use `++`, for binaries use `&lt;&gt;`</span></a>
<a class="sourceLine" id="cb1-75" title="75">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">++</span> [<span class="dv">4</span>,<span class="dv">5</span>]     <span class="co">#=&gt; [1,2,3,4,5]</span></a>
<a class="sourceLine" id="cb1-76" title="76"><span class="vs">&#39;hello &#39;</span> <span class="op">++</span> <span class="vs">&#39;world&#39;</span>  <span class="co">#=&gt; &#39;hello world&#39;</span></a>
<a class="sourceLine" id="cb1-77" title="77"></a>
<a class="sourceLine" id="cb1-78" title="78"><span class="op">&lt;&lt;</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span><span class="op">&gt;&gt;</span> <span class="op">&lt;&gt;</span> <span class="op">&lt;&lt;</span><span class="dv">4</span>,<span class="dv">5</span><span class="op">&gt;&gt;</span> <span class="co">#=&gt; &lt;&lt;1,2,3,4,5&gt;&gt;</span></a>
<a class="sourceLine" id="cb1-79" title="79"><span class="st">&quot;hello &quot;</span> <span class="op">&lt;&gt;</span> <span class="st">&quot;world&quot;</span>  <span class="co">#=&gt; &quot;hello world&quot;</span></a>
<a class="sourceLine" id="cb1-80" title="80"></a>
<a class="sourceLine" id="cb1-81" title="81"><span class="co"># Ranges are represented as `start..end` (both inclusive)</span></a>
<a class="sourceLine" id="cb1-82" title="82"><span class="dv">1</span><span class="op">..</span><span class="dv">10</span> <span class="co">#=&gt; 1..10</span></a>
<a class="sourceLine" id="cb1-83" title="83">lower<span class="op">..</span>upper <span class="op">=</span> <span class="dv">1</span><span class="op">..</span><span class="dv">10</span> <span class="co"># Can use pattern matching on ranges as well</span></a>
<a class="sourceLine" id="cb1-84" title="84">[lower, upper] <span class="co">#=&gt; [1, 10]</span></a>
<a class="sourceLine" id="cb1-85" title="85"></a>
<a class="sourceLine" id="cb1-86" title="86"><span class="co"># Maps are key-value pairs</span></a>
<a class="sourceLine" id="cb1-87" title="87">genders <span class="op">=</span> %{<span class="st">&quot;david&quot;</span> <span class="op">=&gt;</span> <span class="st">&quot;male&quot;</span>, <span class="st">&quot;gillian&quot;</span> <span class="op">=&gt;</span> <span class="st">&quot;female&quot;</span>}</a>
<a class="sourceLine" id="cb1-88" title="88">genders[<span class="st">&quot;david&quot;</span>] <span class="co">#=&gt; &quot;male&quot;</span></a>
<a class="sourceLine" id="cb1-89" title="89"></a>
<a class="sourceLine" id="cb1-90" title="90"><span class="co"># Maps with atom keys can be used like this</span></a>
<a class="sourceLine" id="cb1-91" title="91">genders <span class="op">=</span> %{<span class="va">david:</span> <span class="st">&quot;male&quot;</span>, <span class="va">gillian:</span> <span class="st">&quot;female&quot;</span>}</a>
<a class="sourceLine" id="cb1-92" title="92">genders<span class="op">.</span>gillian <span class="co">#=&gt; &quot;female&quot;</span></a>
<a class="sourceLine" id="cb1-93" title="93"></a>
<a class="sourceLine" id="cb1-94" title="94"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-95" title="95"><span class="co">## -- Operators</span></a>
<a class="sourceLine" id="cb1-96" title="96"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-97" title="97"></a>
<a class="sourceLine" id="cb1-98" title="98"><span class="co"># Some math</span></a>
<a class="sourceLine" id="cb1-99" title="99"><span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span>  <span class="co">#=&gt; 2</span></a>
<a class="sourceLine" id="cb1-100" title="100"><span class="dv">10</span> <span class="op">-</span> <span class="dv">5</span> <span class="co">#=&gt; 5</span></a>
<a class="sourceLine" id="cb1-101" title="101"><span class="dv">5</span> <span class="op">*</span> <span class="dv">2</span>  <span class="co">#=&gt; 10</span></a>
<a class="sourceLine" id="cb1-102" title="102"><span class="dv">10</span> <span class="op">/</span> <span class="dv">2</span> <span class="co">#=&gt; 5.0</span></a>
<a class="sourceLine" id="cb1-103" title="103"></a>
<a class="sourceLine" id="cb1-104" title="104"><span class="co"># In elixir the operator `/` always returns a float.</span></a>
<a class="sourceLine" id="cb1-105" title="105"></a>
<a class="sourceLine" id="cb1-106" title="106"><span class="co"># To do integer division use `div`</span></a>
<a class="sourceLine" id="cb1-107" title="107">div(<span class="dv">10</span>, <span class="dv">2</span>) <span class="co">#=&gt; 5</span></a>
<a class="sourceLine" id="cb1-108" title="108"></a>
<a class="sourceLine" id="cb1-109" title="109"><span class="co"># To get the division remainder use `rem`</span></a>
<a class="sourceLine" id="cb1-110" title="110">rem(<span class="dv">10</span>, <span class="dv">3</span>) <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-111" title="111"></a>
<a class="sourceLine" id="cb1-112" title="112"><span class="co"># There are also boolean operators: `or`, `and` and `not`.</span></a>
<a class="sourceLine" id="cb1-113" title="113"><span class="co"># These operators expect a boolean as their first argument.</span></a>
<a class="sourceLine" id="cb1-114" title="114"><span class="cn">true</span> <span class="kw">and</span> <span class="cn">true</span> <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-115" title="115"><span class="cn">false</span> <span class="kw">or</span> <span class="cn">true</span> <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-116" title="116"><span class="co"># 1 and true</span></a>
<a class="sourceLine" id="cb1-117" title="117"><span class="co">#=&gt; ** (BadBooleanError) expected a boolean on left-side of &quot;and&quot;, got: 1</span></a>
<a class="sourceLine" id="cb1-118" title="118"></a>
<a class="sourceLine" id="cb1-119" title="119"><span class="co"># Elixir also provides `||`, `&amp;&amp;` and `!` which accept arguments of any type.</span></a>
<a class="sourceLine" id="cb1-120" title="120"><span class="co"># All values except `false` and `nil` will evaluate to true.</span></a>
<a class="sourceLine" id="cb1-121" title="121"><span class="dv">1</span> <span class="op">||</span> <span class="cn">true</span>  <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-122" title="122"><span class="cn">false</span> <span class="op">&amp;&amp;</span> <span class="dv">1</span> <span class="co">#=&gt; false</span></a>
<a class="sourceLine" id="cb1-123" title="123"><span class="cn">nil</span> <span class="op">&amp;&amp;</span> <span class="dv">20</span>  <span class="co">#=&gt; nil</span></a>
<a class="sourceLine" id="cb1-124" title="124">!true <span class="co">#=&gt; false</span></a>
<a class="sourceLine" id="cb1-125" title="125"></a>
<a class="sourceLine" id="cb1-126" title="126"><span class="co"># For comparisons we have: `==`, `!=`, `===`, `!==`, `&lt;=`, `&gt;=`, `&lt;` and `&gt;`</span></a>
<a class="sourceLine" id="cb1-127" title="127"><span class="dv">1</span> <span class="op">==</span> <span class="dv">1</span> <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-128" title="128"><span class="dv">1</span><span class="op"> !=</span> <span class="dv">1</span> <span class="co">#=&gt; false</span></a>
<a class="sourceLine" id="cb1-129" title="129"><span class="dv">1</span> <span class="op">&lt;</span> <span class="dv">2</span>  <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-130" title="130"></a>
<a class="sourceLine" id="cb1-131" title="131"><span class="co"># `===` and `!==` are more strict when comparing integers and floats:</span></a>
<a class="sourceLine" id="cb1-132" title="132"><span class="dv">1</span> <span class="op">==</span> <span class="fl">1.0</span>  <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-133" title="133"><span class="dv">1</span> <span class="op">===</span> <span class="fl">1.0</span> <span class="co">#=&gt; false</span></a>
<a class="sourceLine" id="cb1-134" title="134"></a>
<a class="sourceLine" id="cb1-135" title="135"><span class="co"># We can also compare two different data types:</span></a>
<a class="sourceLine" id="cb1-136" title="136"><span class="dv">1</span> <span class="op">&lt;</span> <span class="va">:hello</span> <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-137" title="137"></a>
<a class="sourceLine" id="cb1-138" title="138"><span class="co"># The overall sorting order is defined below:</span></a>
<a class="sourceLine" id="cb1-139" title="139"><span class="co"># number &lt; atom &lt; reference &lt; functions &lt; port &lt; pid &lt; tuple &lt; list &lt; bit string</span></a>
<a class="sourceLine" id="cb1-140" title="140"></a>
<a class="sourceLine" id="cb1-141" title="141"><span class="co"># To quote Joe Armstrong on this: &quot;The actual order is not important,</span></a>
<a class="sourceLine" id="cb1-142" title="142"><span class="co"># but that a total ordering is well defined is important.&quot;</span></a>
<a class="sourceLine" id="cb1-143" title="143"></a>
<a class="sourceLine" id="cb1-144" title="144"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-145" title="145"><span class="co">## -- Control Flow</span></a>
<a class="sourceLine" id="cb1-146" title="146"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-147" title="147"></a>
<a class="sourceLine" id="cb1-148" title="148"><span class="co"># `if` expression</span></a>
<a class="sourceLine" id="cb1-149" title="149"><span class="cf">if</span> <span class="cn">false</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-150" title="150">  <span class="st">&quot;This will never be seen&quot;</span></a>
<a class="sourceLine" id="cb1-151" title="151"><span class="cf">else</span></a>
<a class="sourceLine" id="cb1-152" title="152">  <span class="st">&quot;This will&quot;</span></a>
<a class="sourceLine" id="cb1-153" title="153"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-154" title="154"></a>
<a class="sourceLine" id="cb1-155" title="155"><span class="co"># There&#39;s also `unless`</span></a>
<a class="sourceLine" id="cb1-156" title="156"><span class="cf">unless</span> <span class="cn">true</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-157" title="157">  <span class="st">&quot;This will never be seen&quot;</span></a>
<a class="sourceLine" id="cb1-158" title="158"><span class="cf">else</span></a>
<a class="sourceLine" id="cb1-159" title="159">  <span class="st">&quot;This will&quot;</span></a>
<a class="sourceLine" id="cb1-160" title="160"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-161" title="161"></a>
<a class="sourceLine" id="cb1-162" title="162"><span class="co"># Remember pattern matching? Many control-flow structures in elixir rely on it.</span></a>
<a class="sourceLine" id="cb1-163" title="163"></a>
<a class="sourceLine" id="cb1-164" title="164"><span class="co"># `case` allows us to compare a value against many patterns:</span></a>
<a class="sourceLine" id="cb1-165" title="165"><span class="kw">case</span> {<span class="va">:one</span>, <span class="va">:two</span>} <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-166" title="166">  {<span class="va">:four</span>, <span class="va">:five</span>} <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-167" title="167">    <span class="st">&quot;This won&#39;t match&quot;</span></a>
<a class="sourceLine" id="cb1-168" title="168">  {<span class="va">:one</span>, x} <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-169" title="169">    <span class="st">&quot;This will match and bind `x` to `:two` in this clause&quot;</span></a>
<a class="sourceLine" id="cb1-170" title="170">  _ <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-171" title="171">    <span class="st">&quot;This will match any value&quot;</span></a>
<a class="sourceLine" id="cb1-172" title="172"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-173" title="173"></a>
<a class="sourceLine" id="cb1-174" title="174"><span class="co"># It&#39;s common to bind the value to `_` if we don&#39;t need it.</span></a>
<a class="sourceLine" id="cb1-175" title="175"><span class="co"># For example, if only the head of a list matters to us:</span></a>
<a class="sourceLine" id="cb1-176" title="176">[head <span class="op">|</span> _] <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb1-177" title="177">head <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-178" title="178"></a>
<a class="sourceLine" id="cb1-179" title="179"><span class="co"># For better readability we can do the following:</span></a>
<a class="sourceLine" id="cb1-180" title="180">[head <span class="op">|</span> _tail] <span class="op">=</span> [<span class="va">:a</span>, <span class="va">:b</span>, <span class="va">:c</span>]</a>
<a class="sourceLine" id="cb1-181" title="181">head <span class="co">#=&gt; :a</span></a>
<a class="sourceLine" id="cb1-182" title="182"></a>
<a class="sourceLine" id="cb1-183" title="183"><span class="co"># `cond` lets us check for many conditions at the same time.</span></a>
<a class="sourceLine" id="cb1-184" title="184"><span class="co"># Use `cond` instead of nesting many `if` expressions.</span></a>
<a class="sourceLine" id="cb1-185" title="185"><span class="cf">cond</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-186" title="186">  <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="dv">3</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-187" title="187">    <span class="st">&quot;I will never be seen&quot;</span></a>
<a class="sourceLine" id="cb1-188" title="188">  <span class="dv">2</span> <span class="op">*</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">12</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-189" title="189">    <span class="st">&quot;Me neither&quot;</span></a>
<a class="sourceLine" id="cb1-190" title="190">  <span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">3</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-191" title="191">    <span class="st">&quot;But I will&quot;</span></a>
<a class="sourceLine" id="cb1-192" title="192"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-193" title="193"></a>
<a class="sourceLine" id="cb1-194" title="194"><span class="co"># It is common to set the last condition equal to `true`, which will always match.</span></a>
<a class="sourceLine" id="cb1-195" title="195"><span class="cf">cond</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-196" title="196">  <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="dv">3</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-197" title="197">    <span class="st">&quot;I will never be seen&quot;</span></a>
<a class="sourceLine" id="cb1-198" title="198">  <span class="dv">2</span> <span class="op">*</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">12</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-199" title="199">    <span class="st">&quot;Me neither&quot;</span></a>
<a class="sourceLine" id="cb1-200" title="200">  <span class="cn">true</span> <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-201" title="201">    <span class="st">&quot;But I will (this is essentially an else)&quot;</span></a>
<a class="sourceLine" id="cb1-202" title="202"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-203" title="203"></a>
<a class="sourceLine" id="cb1-204" title="204"><span class="co"># `try/catch` is used to catch values that are thrown, it also supports an</span></a>
<a class="sourceLine" id="cb1-205" title="205"><span class="co"># `after` clause that is invoked whether or not a value is caught.</span></a>
<a class="sourceLine" id="cb1-206" title="206"><span class="cf">try</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-207" title="207">  <span class="cf">throw</span>(<span class="va">:hello</span>)</a>
<a class="sourceLine" id="cb1-208" title="208"><span class="cf">catch</span></a>
<a class="sourceLine" id="cb1-209" title="209">  message <span class="op">-&gt;</span> <span class="st">&quot;Got </span><span class="ot">#{</span>message<span class="ot">}</span><span class="st">.&quot;</span></a>
<a class="sourceLine" id="cb1-210" title="210"><span class="kw">after</span></a>
<a class="sourceLine" id="cb1-211" title="211">  <span class="cn">IO</span><span class="op">.</span>puts(<span class="st">&quot;I&#39;m the after clause.&quot;</span>)</a>
<a class="sourceLine" id="cb1-212" title="212"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-213" title="213"><span class="co">#=&gt; I&#39;m the after clause</span></a>
<a class="sourceLine" id="cb1-214" title="214"><span class="co"># &quot;Got :hello&quot;</span></a>
<a class="sourceLine" id="cb1-215" title="215"></a>
<a class="sourceLine" id="cb1-216" title="216"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-217" title="217"><span class="co">## -- Modules and Functions</span></a>
<a class="sourceLine" id="cb1-218" title="218"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-219" title="219"></a>
<a class="sourceLine" id="cb1-220" title="220"><span class="co"># Anonymous functions (notice the dot)</span></a>
<a class="sourceLine" id="cb1-221" title="221">square <span class="op">=</span> <span class="kw">fn</span>(x) <span class="op">-&gt;</span> x <span class="op">*</span> x <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-222" title="222">square<span class="op">.</span>(<span class="dv">5</span>) <span class="co">#=&gt; 25</span></a>
<a class="sourceLine" id="cb1-223" title="223"></a>
<a class="sourceLine" id="cb1-224" title="224"><span class="co"># They also accept many clauses and guards.</span></a>
<a class="sourceLine" id="cb1-225" title="225"><span class="co"># Guards let you fine tune pattern matching,</span></a>
<a class="sourceLine" id="cb1-226" title="226"><span class="co"># they are indicated by the `when` keyword:</span></a>
<a class="sourceLine" id="cb1-227" title="227">f <span class="op">=</span> <span class="kw">fn</span></a>
<a class="sourceLine" id="cb1-228" title="228">  x, y <span class="kw">when</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">-&gt;</span> x <span class="op">+</span> y</a>
<a class="sourceLine" id="cb1-229" title="229">  x, y <span class="op">-&gt;</span> x <span class="op">*</span> y</a>
<a class="sourceLine" id="cb1-230" title="230"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-231" title="231"></a>
<a class="sourceLine" id="cb1-232" title="232">f<span class="op">.</span>(<span class="dv">1</span>, <span class="dv">3</span>)  <span class="co">#=&gt; 4</span></a>
<a class="sourceLine" id="cb1-233" title="233">f<span class="op">.</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">3</span>) <span class="co">#=&gt; -3</span></a>
<a class="sourceLine" id="cb1-234" title="234"></a>
<a class="sourceLine" id="cb1-235" title="235"><span class="co"># Elixir also provides many built-in functions.</span></a>
<a class="sourceLine" id="cb1-236" title="236"><span class="co"># These are available in the current scope.</span></a>
<a class="sourceLine" id="cb1-237" title="237">is_number(<span class="dv">10</span>)    <span class="co">#=&gt; true</span></a>
<a class="sourceLine" id="cb1-238" title="238">is_list(<span class="st">&quot;hello&quot;</span>) <span class="co">#=&gt; false</span></a>
<a class="sourceLine" id="cb1-239" title="239">elem({<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>}, <span class="dv">0</span>) <span class="co">#=&gt; 1</span></a>
<a class="sourceLine" id="cb1-240" title="240"></a>
<a class="sourceLine" id="cb1-241" title="241"><span class="co"># You can group several functions into a module. Inside a module use `def`</span></a>
<a class="sourceLine" id="cb1-242" title="242"><span class="co"># to define your functions.</span></a>
<a class="sourceLine" id="cb1-243" title="243"><span class="kw">defmodule</span> <span class="cn">Math</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-244" title="244">  <span class="kw">def</span> sum(a, b) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-245" title="245">    a <span class="op">+</span> b</a>
<a class="sourceLine" id="cb1-246" title="246">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-247" title="247"></a>
<a class="sourceLine" id="cb1-248" title="248">  <span class="kw">def</span> square(x) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-249" title="249">    x <span class="op">*</span> x</a>
<a class="sourceLine" id="cb1-250" title="250">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-251" title="251"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-252" title="252"></a>
<a class="sourceLine" id="cb1-253" title="253"><span class="cn">Math</span><span class="op">.</span>sum(<span class="dv">1</span>, <span class="dv">2</span>)  <span class="co">#=&gt; 3</span></a>
<a class="sourceLine" id="cb1-254" title="254"><span class="cn">Math</span><span class="op">.</span>square(<span class="dv">3</span>) <span class="co">#=&gt; 9</span></a>
<a class="sourceLine" id="cb1-255" title="255"></a>
<a class="sourceLine" id="cb1-256" title="256"><span class="co"># To compile our simple Math module save it as `math.ex` and use `elixirc`</span></a>
<a class="sourceLine" id="cb1-257" title="257"><span class="co"># in your terminal: elixirc math.ex</span></a>
<a class="sourceLine" id="cb1-258" title="258"></a>
<a class="sourceLine" id="cb1-259" title="259"><span class="co"># Inside a module we can define functions with `def` and private functions with `defp`.</span></a>
<a class="sourceLine" id="cb1-260" title="260"><span class="co"># A function defined with `def` is available to be invoked from other modules,</span></a>
<a class="sourceLine" id="cb1-261" title="261"><span class="co"># a private function can only be invoked locally.</span></a>
<a class="sourceLine" id="cb1-262" title="262"><span class="kw">defmodule</span> <span class="cn">PrivateMath</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-263" title="263">  <span class="kw">def</span> sum(a, b) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-264" title="264">    do_sum(a, b)</a>
<a class="sourceLine" id="cb1-265" title="265">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-266" title="266"></a>
<a class="sourceLine" id="cb1-267" title="267">  <span class="kw">defp</span> do_sum(a, b) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-268" title="268">    a <span class="op">+</span> b</a>
<a class="sourceLine" id="cb1-269" title="269">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-270" title="270"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-271" title="271"></a>
<a class="sourceLine" id="cb1-272" title="272"><span class="cn">PrivateMath</span><span class="op">.</span>sum(<span class="dv">1</span>, <span class="dv">2</span>)    <span class="co">#=&gt; 3</span></a>
<a class="sourceLine" id="cb1-273" title="273"><span class="co"># PrivateMath.do_sum(1, 2) #=&gt; ** (UndefinedFunctionError)</span></a>
<a class="sourceLine" id="cb1-274" title="274"></a>
<a class="sourceLine" id="cb1-275" title="275"><span class="co"># Function declarations also support guards and multiple clauses.</span></a>
<a class="sourceLine" id="cb1-276" title="276"><span class="co"># When a function with multiple clauses is called, the first function</span></a>
<a class="sourceLine" id="cb1-277" title="277"><span class="co"># that satisfies the clause will be invoked.</span></a>
<a class="sourceLine" id="cb1-278" title="278"><span class="co"># Example: invoking area({:circle, 3}) will call the second area</span></a>
<a class="sourceLine" id="cb1-279" title="279"><span class="co"># function defined below, not the first:</span></a>
<a class="sourceLine" id="cb1-280" title="280"><span class="kw">defmodule</span> <span class="cn">Geometry</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-281" title="281">  <span class="kw">def</span> area({<span class="va">:rectangle</span>, w, h}) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-282" title="282">    w <span class="op">*</span> h</a>
<a class="sourceLine" id="cb1-283" title="283">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-284" title="284"></a>
<a class="sourceLine" id="cb1-285" title="285">  <span class="kw">def</span> area({<span class="va">:circle</span>, r}) <span class="kw">when</span> is_number(r) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-286" title="286">    <span class="fl">3.14</span> <span class="op">*</span> r <span class="op">*</span> r</a>
<a class="sourceLine" id="cb1-287" title="287">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-288" title="288"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-289" title="289"></a>
<a class="sourceLine" id="cb1-290" title="290"><span class="cn">Geometry</span><span class="op">.</span>area({<span class="va">:rectangle</span>, <span class="dv">2</span>, <span class="dv">3</span>}) <span class="co">#=&gt; 6</span></a>
<a class="sourceLine" id="cb1-291" title="291"><span class="cn">Geometry</span><span class="op">.</span>area({<span class="va">:circle</span>, <span class="dv">3</span>})       <span class="co">#=&gt; 28.25999999999999801048</span></a>
<a class="sourceLine" id="cb1-292" title="292"><span class="co"># Geometry.area({:circle, &quot;not_a_number&quot;})</span></a>
<a class="sourceLine" id="cb1-293" title="293"><span class="co">#=&gt; ** (FunctionClauseError) no function clause matching in Geometry.area/1</span></a>
<a class="sourceLine" id="cb1-294" title="294"></a>
<a class="sourceLine" id="cb1-295" title="295"><span class="co"># Due to immutability, recursion is a big part of elixir</span></a>
<a class="sourceLine" id="cb1-296" title="296"><span class="kw">defmodule</span> <span class="cn">Recursion</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-297" title="297">  <span class="kw">def</span> sum_list([head <span class="op">|</span> tail], acc) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-298" title="298">    sum_list(tail, acc <span class="op">+</span> head)</a>
<a class="sourceLine" id="cb1-299" title="299">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-300" title="300"></a>
<a class="sourceLine" id="cb1-301" title="301">  <span class="kw">def</span> sum_list([], acc) <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-302" title="302">    acc</a>
<a class="sourceLine" id="cb1-303" title="303">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-304" title="304"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-305" title="305"></a>
<a class="sourceLine" id="cb1-306" title="306"><span class="cn">Recursion</span><span class="op">.</span>sum_list([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>) <span class="co">#=&gt; 6</span></a>
<a class="sourceLine" id="cb1-307" title="307"></a>
<a class="sourceLine" id="cb1-308" title="308"><span class="co"># Elixir modules support attributes, there are built-in attributes and you</span></a>
<a class="sourceLine" id="cb1-309" title="309"><span class="co"># may also add custom ones.</span></a>
<a class="sourceLine" id="cb1-310" title="310"><span class="kw">defmodule</span> <span class="cn">MyMod</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-311" title="311">  <span class="ot">@moduledoc &quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-312" title="312"><span class="co">  This is a built-in attribute on a example module.</span></a>
<a class="sourceLine" id="cb1-313" title="313"><span class="co">  </span><span class="ot">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-314" title="314"></a>
<a class="sourceLine" id="cb1-315" title="315">  <span class="ot">@my_data</span> <span class="dv">100</span> <span class="co"># This is a custom attribute.</span></a>
<a class="sourceLine" id="cb1-316" title="316">  <span class="cn">IO</span><span class="op">.</span>inspect(<span class="ot">@my_data</span>) <span class="co">#=&gt; 100</span></a>
<a class="sourceLine" id="cb1-317" title="317"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-318" title="318"></a>
<a class="sourceLine" id="cb1-319" title="319"><span class="co"># The pipe operator |&gt; allows you to pass the output of an expression</span></a>
<a class="sourceLine" id="cb1-320" title="320"><span class="co"># as the first parameter into a function. </span></a>
<a class="sourceLine" id="cb1-321" title="321"></a>
<a class="sourceLine" id="cb1-322" title="322"><span class="cn">Range</span><span class="op">.</span>new(<span class="dv">1</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1-323" title="323"><span class="op">|&gt;</span> <span class="cn">Enum</span><span class="op">.</span>map(<span class="kw">fn</span> x <span class="op">-&gt;</span> x <span class="op">*</span> x <span class="kw">end</span>)</a>
<a class="sourceLine" id="cb1-324" title="324"><span class="op">|&gt;</span> <span class="cn">Enum</span><span class="op">.</span>filter(<span class="kw">fn</span> x <span class="op">-&gt;</span> rem(x, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">0</span> <span class="kw">end</span>)</a>
<a class="sourceLine" id="cb1-325" title="325"><span class="co">#=&gt; [4, 16, 36, 64, 100]</span></a>
<a class="sourceLine" id="cb1-326" title="326"></a>
<a class="sourceLine" id="cb1-327" title="327"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-328" title="328"><span class="co">## -- Structs and Exceptions</span></a>
<a class="sourceLine" id="cb1-329" title="329"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-330" title="330"></a>
<a class="sourceLine" id="cb1-331" title="331"><span class="co"># Structs are extensions on top of maps that bring default values,</span></a>
<a class="sourceLine" id="cb1-332" title="332"><span class="co"># compile-time guarantees and polymorphism into Elixir.</span></a>
<a class="sourceLine" id="cb1-333" title="333"><span class="kw">defmodule</span> <span class="cn">Person</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-334" title="334">  <span class="kw">defstruct</span> <span class="va">name:</span> <span class="cn">nil</span>, <span class="va">age:</span> <span class="dv">0</span>, <span class="va">height:</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-335" title="335"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-336" title="336"></a>
<a class="sourceLine" id="cb1-337" title="337">joe_info <span class="op">=</span> %<span class="cn">Person</span>{ <span class="va">name:</span> <span class="st">&quot;Joe&quot;</span>, <span class="va">age:</span> <span class="dv">30</span>, <span class="va">height:</span> <span class="dv">180</span> }</a>
<a class="sourceLine" id="cb1-338" title="338"><span class="co">#=&gt; %Person{age: 30, height: 180, name: &quot;Joe&quot;}</span></a>
<a class="sourceLine" id="cb1-339" title="339"></a>
<a class="sourceLine" id="cb1-340" title="340"><span class="co"># Access the value of name</span></a>
<a class="sourceLine" id="cb1-341" title="341">joe_info<span class="op">.</span>name <span class="co">#=&gt; &quot;Joe&quot;</span></a>
<a class="sourceLine" id="cb1-342" title="342"></a>
<a class="sourceLine" id="cb1-343" title="343"><span class="co"># Update the value of age</span></a>
<a class="sourceLine" id="cb1-344" title="344">older_joe_info <span class="op">=</span> %{ joe_info <span class="op">|</span> <span class="va">age:</span> <span class="dv">31</span> }</a>
<a class="sourceLine" id="cb1-345" title="345"><span class="co">#=&gt; %Person{age: 31, height: 180, name: &quot;Joe&quot;}</span></a>
<a class="sourceLine" id="cb1-346" title="346"></a>
<a class="sourceLine" id="cb1-347" title="347"><span class="co"># The `try` block with the `rescue` keyword is used to handle exceptions</span></a>
<a class="sourceLine" id="cb1-348" title="348"><span class="cf">try</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-349" title="349">  <span class="cf">raise</span> <span class="st">&quot;some error&quot;</span></a>
<a class="sourceLine" id="cb1-350" title="350"><span class="cf">rescue</span></a>
<a class="sourceLine" id="cb1-351" title="351">  <span class="cn">RuntimeError</span> <span class="op">-&gt;</span> <span class="st">&quot;rescued a runtime error&quot;</span></a>
<a class="sourceLine" id="cb1-352" title="352">  _error <span class="op">-&gt;</span> <span class="st">&quot;this will rescue any error&quot;</span></a>
<a class="sourceLine" id="cb1-353" title="353"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-354" title="354"><span class="co">#=&gt; &quot;rescued a runtime error&quot;</span></a>
<a class="sourceLine" id="cb1-355" title="355"></a>
<a class="sourceLine" id="cb1-356" title="356"><span class="co"># All exceptions have a message</span></a>
<a class="sourceLine" id="cb1-357" title="357"><span class="cf">try</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-358" title="358">  <span class="cf">raise</span> <span class="st">&quot;some error&quot;</span></a>
<a class="sourceLine" id="cb1-359" title="359"><span class="cf">rescue</span></a>
<a class="sourceLine" id="cb1-360" title="360">  x <span class="kw">in</span> [<span class="cn">RuntimeError</span>] <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-361" title="361">    x<span class="op">.</span>message</a>
<a class="sourceLine" id="cb1-362" title="362"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-363" title="363"><span class="co">#=&gt; &quot;some error&quot;</span></a>
<a class="sourceLine" id="cb1-364" title="364"></a>
<a class="sourceLine" id="cb1-365" title="365"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-366" title="366"><span class="co">## -- Concurrency</span></a>
<a class="sourceLine" id="cb1-367" title="367"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-368" title="368"></a>
<a class="sourceLine" id="cb1-369" title="369"><span class="co"># Elixir relies on the actor model for concurrency. All we need to write</span></a>
<a class="sourceLine" id="cb1-370" title="370"><span class="co"># concurrent programs in elixir are three primitives: spawning processes,</span></a>
<a class="sourceLine" id="cb1-371" title="371"><span class="co"># sending messages and receiving messages.</span></a>
<a class="sourceLine" id="cb1-372" title="372"></a>
<a class="sourceLine" id="cb1-373" title="373"><span class="co"># To start a new process we use the `spawn` function, which takes a function</span></a>
<a class="sourceLine" id="cb1-374" title="374"><span class="co"># as argument.</span></a>
<a class="sourceLine" id="cb1-375" title="375">f <span class="op">=</span> <span class="kw">fn</span> <span class="op">-&gt;</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">2</span> <span class="kw">end</span> <span class="co">#=&gt; #Function&lt;erl_eval.20.80484245&gt;</span></a>
<a class="sourceLine" id="cb1-376" title="376">spawn(f) <span class="co">#=&gt; #PID&lt;0.40.0&gt;</span></a>
<a class="sourceLine" id="cb1-377" title="377"></a>
<a class="sourceLine" id="cb1-378" title="378"><span class="co"># `spawn` returns a pid (process identifier), you can use this pid to send</span></a>
<a class="sourceLine" id="cb1-379" title="379"><span class="co"># messages to the process. To do message passing we use the `send` operator.</span></a>
<a class="sourceLine" id="cb1-380" title="380"><span class="co"># For all of this to be useful we need to be able to receive messages. This is</span></a>
<a class="sourceLine" id="cb1-381" title="381"><span class="co"># achieved with the `receive` mechanism:</span></a>
<a class="sourceLine" id="cb1-382" title="382"></a>
<a class="sourceLine" id="cb1-383" title="383"><span class="co"># The `receive do` block is used to listen for messages and process</span></a>
<a class="sourceLine" id="cb1-384" title="384"><span class="co"># them when they are received. A `receive do` block will only</span></a>
<a class="sourceLine" id="cb1-385" title="385"><span class="co"># process one received message. In order to process multiple</span></a>
<a class="sourceLine" id="cb1-386" title="386"><span class="co"># messages, a function with a `receive do` block must recursively</span></a>
<a class="sourceLine" id="cb1-387" title="387"><span class="co"># call itself to get into the `receive do` block again.</span></a>
<a class="sourceLine" id="cb1-388" title="388"></a>
<a class="sourceLine" id="cb1-389" title="389"><span class="kw">defmodule</span> <span class="cn">Geometry</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-390" title="390">  <span class="kw">def</span> area_loop <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-391" title="391">    <span class="kw">receive</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-392" title="392">      {<span class="va">:rectangle</span>, w, h} <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-393" title="393">        <span class="cn">IO</span><span class="op">.</span>puts(<span class="st">&quot;Area = </span><span class="ot">#{</span>w <span class="op">*</span> h<span class="ot">}</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb1-394" title="394">        area_loop()</a>
<a class="sourceLine" id="cb1-395" title="395">      {<span class="va">:circle</span>, r} <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb1-396" title="396">        <span class="cn">IO</span><span class="op">.</span>puts(<span class="st">&quot;Area = </span><span class="ot">#{</span><span class="fl">3.14</span> <span class="op">*</span> r <span class="op">*</span> r<span class="ot">}</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb1-397" title="397">        area_loop()</a>
<a class="sourceLine" id="cb1-398" title="398">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-399" title="399">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-400" title="400"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-401" title="401"></a>
<a class="sourceLine" id="cb1-402" title="402"><span class="co"># Compile the module and create a process that evaluates `area_loop` in the shell</span></a>
<a class="sourceLine" id="cb1-403" title="403">pid <span class="op">=</span> spawn(<span class="kw">fn</span> <span class="op">-&gt;</span> <span class="cn">Geometry</span><span class="op">.</span>area_loop() <span class="kw">end</span>) <span class="co">#=&gt; #PID&lt;0.40.0&gt;</span></a>
<a class="sourceLine" id="cb1-404" title="404"><span class="co"># Alternatively</span></a>
<a class="sourceLine" id="cb1-405" title="405">pid <span class="op">=</span> spawn(<span class="cn">Geometry</span>, <span class="va">:area_loop</span>, [])</a>
<a class="sourceLine" id="cb1-406" title="406"></a>
<a class="sourceLine" id="cb1-407" title="407"><span class="co"># Send a message to `pid` that will match a pattern in the receive statement</span></a>
<a class="sourceLine" id="cb1-408" title="408">send pid, {<span class="va">:rectangle</span>, <span class="dv">2</span>, <span class="dv">3</span>}</a>
<a class="sourceLine" id="cb1-409" title="409"><span class="co">#=&gt; Area = 6</span></a>
<a class="sourceLine" id="cb1-410" title="410"><span class="co">#   {:rectangle,2,3}</span></a>
<a class="sourceLine" id="cb1-411" title="411"></a>
<a class="sourceLine" id="cb1-412" title="412">send pid, {<span class="va">:circle</span>, <span class="dv">2</span>}</a>
<a class="sourceLine" id="cb1-413" title="413"><span class="co">#=&gt; Area = 12.56000000000000049738</span></a>
<a class="sourceLine" id="cb1-414" title="414"><span class="co">#   {:circle,2}</span></a>
<a class="sourceLine" id="cb1-415" title="415"></a>
<a class="sourceLine" id="cb1-416" title="416"><span class="co"># The shell is also a process, you can use `self` to get the current pid</span></a>
<a class="sourceLine" id="cb1-417" title="417">self() <span class="co">#=&gt; #PID&lt;0.27.0&gt;</span></a>
<a class="sourceLine" id="cb1-418" title="418"></a>
<a class="sourceLine" id="cb1-419" title="419"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-420" title="420"><span class="co">## -- Agents</span></a>
<a class="sourceLine" id="cb1-421" title="421"><span class="co">## ---------------------------</span></a>
<a class="sourceLine" id="cb1-422" title="422"></a>
<a class="sourceLine" id="cb1-423" title="423"><span class="co"># An agent is a process that keeps track of some changing value</span></a>
<a class="sourceLine" id="cb1-424" title="424"></a>
<a class="sourceLine" id="cb1-425" title="425"><span class="co"># Create an agent with `Agent.start_link`, passing in a function</span></a>
<a class="sourceLine" id="cb1-426" title="426"><span class="co"># The initial state of the agent will be whatever that function returns</span></a>
<a class="sourceLine" id="cb1-427" title="427">{<span class="va">:ok</span>, my_agent} <span class="op">=</span> <span class="cn">Agent</span><span class="op">.</span>start_link(<span class="kw">fn</span> <span class="op">-&gt;</span> [<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>] <span class="kw">end</span>)</a>
<a class="sourceLine" id="cb1-428" title="428"></a>
<a class="sourceLine" id="cb1-429" title="429"><span class="co"># `Agent.get` takes an agent name and a `fn` that gets passed the current state</span></a>
<a class="sourceLine" id="cb1-430" title="430"><span class="co"># Whatever that `fn` returns is what you&#39;ll get back</span></a>
<a class="sourceLine" id="cb1-431" title="431"><span class="cn">Agent</span><span class="op">.</span>get(my_agent, <span class="kw">fn</span> colors <span class="op">-&gt;</span> colors <span class="kw">end</span>) <span class="co">#=&gt; [&quot;red&quot;, &quot;green&quot;]</span></a>
<a class="sourceLine" id="cb1-432" title="432"></a>
<a class="sourceLine" id="cb1-433" title="433"><span class="co"># Update the agent&#39;s state the same way</span></a>
<a class="sourceLine" id="cb1-434" title="434"><span class="cn">Agent</span><span class="op">.</span>update(my_agent, <span class="kw">fn</span> colors <span class="op">-&gt;</span> [<span class="st">&quot;blue&quot;</span> <span class="op">|</span> colors] <span class="kw">end</span>)</a></code></pre></div>
<h2 id="references">References</h2>
<ul>
<li><a href="https://elixir-lang.org/getting-started/introduction.html">Getting started guide</a> from the <a href="https://elixir-lang.org">Elixir website</a></li>
<li><a href="https://elixir-lang.org/docs.html">Elixir Documentation</a></li>
<li><a href="https://pragprog.com/book/elixir/programming-elixir">“Programming Elixir”</a> by Dave Thomas</li>
<li><a href="https://media.pragprog.com/titles/elixir/ElixirCheat.pdf">Elixir Cheat Sheet</a></li>
<li><a href="https://learnyousomeerlang.com/">“Learn You Some Erlang for Great Good!”</a> by Fred Hebert</li>
<li><a href="https://pragprog.com/book/jaerlang2/programming-erlang">“Programming Erlang: Software for a Concurrent World”</a> by Joe Armstrong</li>
<li><a href="https://learn-elixir.com/">Introduction to Elixir</a></li>
</ul>
</body>
</html>
