<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>CHICKEN.html</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>CHICKEN is an implementation of Scheme programming language that can compile Scheme programs to C code as well as interpret them. CHICKEN supports R5RS and R7RS (work in progress) standards and many extensions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb1-1" title="1"><span class="co">;; #!/usr/bin/env csi -s</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">;; Run the CHICKEN REPL in the commandline as follows :</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">;; $ csi</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">; 0. Syntax</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">;; Single line comments start with a semicolon</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">#| Block comments</a>
<a class="sourceLine" id="cb1-13" title="13">   can span multiple lines <span class="kw">and</span>...</a>
<a class="sourceLine" id="cb1-14" title="14">   #| can be nested</a>
<a class="sourceLine" id="cb1-15" title="15">   |#</a>
<a class="sourceLine" id="cb1-16" title="16">|#</a>
<a class="sourceLine" id="cb1-17" title="17"></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">;; S-expression comments are used to comment out expressions</span></a>
<a class="sourceLine" id="cb1-19" title="19">#<span class="co">; (display &quot;nothing&quot;)    ; discard this expression </span></a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">;; CHICKEN has two fundamental pieces of syntax: Atoms and S-expressions</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co">;; an atom is something that evaluates to itself</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co">;; all builtin data types viz. numbers, chars, booleans, strings etc. are atoms</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co">;; Furthermore an atom can be a symbol, an identifier, a keyword, a procedure</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="co">;; or the empty list (also called null)</span></a>
<a class="sourceLine" id="cb1-26" title="26">&#39;athing              <span class="co">;; =&gt; athing </span></a>
<a class="sourceLine" id="cb1-27" title="27">&#39;+                   <span class="co">;; =&gt; + </span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="op">+</span>                    <span class="co">;; =&gt; &lt;procedure C_plus&gt;</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co">;; S-expressions (short for symbolic expressions) consists of one or more atoms</span></a>
<a class="sourceLine" id="cb1-31" title="31">(quote <span class="op">+</span>)            <span class="co">;; =&gt; + ; another way of writing &#39;+</span></a>
<a class="sourceLine" id="cb1-32" title="32">(<span class="op">+</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)            <span class="co">;; =&gt; 6 ; this S-expression evaluates to a function call</span></a>
<a class="sourceLine" id="cb1-33" title="33">&#39;(<span class="op">+</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)           <span class="co">;; =&gt; (+ 1 2 3) ; evaluates to a list </span></a>
<a class="sourceLine" id="cb1-34" title="34"></a>
<a class="sourceLine" id="cb1-35" title="35"></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="co">; 1. Primitive Datatypes and Operators </span></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-39" title="39"></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="co">;; Numbers</span></a>
<a class="sourceLine" id="cb1-41" title="41"><span class="dv">99999999999999999999</span> <span class="co">;; integers</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="ch">#b</span><span class="dv">1010</span>               <span class="co">;; binary ; =&gt; 10</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="ch">#o</span><span class="dv">10</span>                 <span class="co">;; octal  ; =&gt; 8</span></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="ch">#x</span><span class="dv">8</span>ded               <span class="co">;; hexadecimal ; =&gt; 36333</span></a>
<a class="sourceLine" id="cb1-45" title="45"><span class="fl">3.14</span>                 <span class="co">;; real</span></a>
<a class="sourceLine" id="cb1-46" title="46"><span class="fl">6.02e+23</span></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="dv">3</span>/<span class="dv">4</span>                  <span class="co">;; rational</span></a>
<a class="sourceLine" id="cb1-48" title="48"></a>
<a class="sourceLine" id="cb1-49" title="49"><span class="co">;;Characters and Strings</span></a>
<a class="sourceLine" id="cb1-50" title="50"><span class="ch">#\A</span>                  <span class="co">;; A char</span></a>
<a class="sourceLine" id="cb1-51" title="51"><span class="st">&quot;Hello, World!&quot;</span>      <span class="co">;; strings are fixed-length arrays of characters</span></a>
<a class="sourceLine" id="cb1-52" title="52"></a>
<a class="sourceLine" id="cb1-53" title="53"><span class="co">;; Booleans</span></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="dv">#t</span>                  <span class="co">;; true</span></a>
<a class="sourceLine" id="cb1-55" title="55"><span class="dv">#f</span>                  <span class="co">;; false</span></a>
<a class="sourceLine" id="cb1-56" title="56"></a>
<a class="sourceLine" id="cb1-57" title="57"><span class="co">;; Function call is written as (f x y z ...)</span></a>
<a class="sourceLine" id="cb1-58" title="58"><span class="co">;; where f is a function and x,y,z, ... are arguments</span></a>
<a class="sourceLine" id="cb1-59" title="59">(print <span class="st">&quot;Hello, World!&quot;</span>)    <span class="co">;; =&gt; Hello, World!</span></a>
<a class="sourceLine" id="cb1-60" title="60"><span class="co">;; formatted output</span></a>
<a class="sourceLine" id="cb1-61" title="61">(printf <span class="st">&quot;Hello, ~a.\n&quot;</span> <span class="st">&quot;World&quot;</span>)  <span class="co">;; =&gt; Hello, World.</span></a>
<a class="sourceLine" id="cb1-62" title="62"></a>
<a class="sourceLine" id="cb1-63" title="63"><span class="co">;; print commandline arguments</span></a>
<a class="sourceLine" id="cb1-64" title="64">(map print (command-line-arguments)) </a>
<a class="sourceLine" id="cb1-65" title="65"></a>
<a class="sourceLine" id="cb1-66" title="66">(<span class="kw">list</span> &#39;foo &#39;bar &#39;baz)          <span class="co">;; =&gt; (foo bar baz)</span></a>
<a class="sourceLine" id="cb1-67" title="67">(<span class="kw">string-append</span> <span class="st">&quot;pine&quot;</span> <span class="st">&quot;apple&quot;</span>) <span class="co">;; =&gt; &quot;pineapple&quot;</span></a>
<a class="sourceLine" id="cb1-68" title="68">(<span class="kw">string-ref</span> <span class="st">&quot;tapioca&quot;</span> <span class="dv">3</span>)       <span class="co">;; =&gt; #\i;; character &#39;i&#39; is at index 3</span></a>
<a class="sourceLine" id="cb1-69" title="69">(<span class="kw">string-&gt;list</span> <span class="st">&quot;CHICKEN&quot;</span>)       <span class="co">;; =&gt; (#\C #\H #\I #\C #\K #\E #\N)</span></a>
<a class="sourceLine" id="cb1-70" title="70">(string-intersperse &#39;(<span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span>) <span class="st">&quot;:&quot;</span>) <span class="co">;; =&gt; &quot;1:2&quot;</span></a>
<a class="sourceLine" id="cb1-71" title="71">(string-split <span class="st">&quot;1:2:3&quot;</span> <span class="st">&quot;:&quot;</span>)     <span class="co">;; =&gt; (&quot;1&quot; &quot;2&quot; &quot;3&quot;)</span></a>
<a class="sourceLine" id="cb1-72" title="72"></a>
<a class="sourceLine" id="cb1-73" title="73"></a>
<a class="sourceLine" id="cb1-74" title="74"><span class="co">;; Predicates are special functions that return boolean values</span></a>
<a class="sourceLine" id="cb1-75" title="75">(atom? <span class="dv">#t</span>)                <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-76" title="76"></a>
<a class="sourceLine" id="cb1-77" title="77">(<span class="kw">symbol?</span> <span class="dv">#t</span>)              <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-78" title="78"></a>
<a class="sourceLine" id="cb1-79" title="79">(<span class="kw">symbol?</span> &#39;+)              <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-80" title="80"></a>
<a class="sourceLine" id="cb1-81" title="81">(<span class="kw">procedure?</span> <span class="op">+</span>)            <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-82" title="82"></a>
<a class="sourceLine" id="cb1-83" title="83">(<span class="kw">pair?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span>))            <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-84" title="84"></a>
<a class="sourceLine" id="cb1-85" title="85">(<span class="kw">pair?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span> . <span class="dv">3</span>))        <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-86" title="86"></a>
<a class="sourceLine" id="cb1-87" title="87">(<span class="kw">pair?</span> &#39;())               <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-88" title="88"></a>
<a class="sourceLine" id="cb1-89" title="89">(<span class="kw">list?</span> &#39;())               <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-90" title="90"></a>
<a class="sourceLine" id="cb1-91" title="91"></a>
<a class="sourceLine" id="cb1-92" title="92"><span class="co">;; Some arithmetic operations</span></a>
<a class="sourceLine" id="cb1-93" title="93"></a>
<a class="sourceLine" id="cb1-94" title="94">(<span class="op">+</span> <span class="dv">1</span> <span class="dv">1</span>)                   <span class="co">;; =&gt; 2</span></a>
<a class="sourceLine" id="cb1-95" title="95">(<span class="op">-</span> <span class="dv">8</span> <span class="dv">1</span>)                   <span class="co">;; =&gt; 7</span></a>
<a class="sourceLine" id="cb1-96" title="96">(* <span class="dv">10</span> <span class="dv">2</span>)                  <span class="co">;; =&gt; 20</span></a>
<a class="sourceLine" id="cb1-97" title="97">(<span class="kw">expt</span> <span class="dv">2</span> <span class="dv">3</span>)                <span class="co">;; =&gt; 8</span></a>
<a class="sourceLine" id="cb1-98" title="98">(<span class="kw">remainder</span> <span class="dv">5</span> <span class="dv">2</span>)           <span class="co">;; =&gt; 1</span></a>
<a class="sourceLine" id="cb1-99" title="99">(<span class="op">/</span> <span class="dv">35</span> <span class="dv">5</span>)                  <span class="co">;; =&gt; 7</span></a>
<a class="sourceLine" id="cb1-100" title="100">(<span class="op">/</span> <span class="dv">1</span> <span class="dv">3</span>)                   <span class="co">;; =&gt; 0.333333333333333</span></a>
<a class="sourceLine" id="cb1-101" title="101"></a>
<a class="sourceLine" id="cb1-102" title="102"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-103" title="103"><span class="co">; 2. Variables</span></a>
<a class="sourceLine" id="cb1-104" title="104"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-105" title="105"></a>
<a class="sourceLine" id="cb1-106" title="106"><span class="co">;; You can create variables with define</span></a>
<a class="sourceLine" id="cb1-107" title="107"><span class="co">;; A variable name can use any character except: ()[]{}&quot;,&#39;`;#\</span></a>
<a class="sourceLine" id="cb1-108" title="108">(<span class="ex">define</span><span class="fu"> myvar </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb1-109" title="109">myvar        <span class="co">;; =&gt; 5</span></a>
<a class="sourceLine" id="cb1-110" title="110"></a>
<a class="sourceLine" id="cb1-111" title="111"><span class="co">;; Alias to a procedure</span></a>
<a class="sourceLine" id="cb1-112" title="112">(<span class="ex">define</span><span class="fu"> ** </span><span class="kw">expt</span>)</a>
<a class="sourceLine" id="cb1-113" title="113">(** <span class="dv">2</span> <span class="dv">3</span>)     <span class="co">;; =&gt; 8</span></a>
<a class="sourceLine" id="cb1-114" title="114"></a>
<a class="sourceLine" id="cb1-115" title="115"><span class="co">;; Accessing an undefined variable raises an exception</span></a>
<a class="sourceLine" id="cb1-116" title="116">s            <span class="co">;; =&gt; Error: unbound variable: s</span></a>
<a class="sourceLine" id="cb1-117" title="117"></a>
<a class="sourceLine" id="cb1-118" title="118"><span class="co">;; Local binding</span></a>
<a class="sourceLine" id="cb1-119" title="119">(<span class="kw">let</span> ((me <span class="st">&quot;Bob&quot;</span>))</a>
<a class="sourceLine" id="cb1-120" title="120">  (print me))     <span class="co">;; =&gt; Bob</span></a>
<a class="sourceLine" id="cb1-121" title="121"></a>
<a class="sourceLine" id="cb1-122" title="122">(print me)        <span class="co">;; =&gt; Error: unbound variable: me</span></a>
<a class="sourceLine" id="cb1-123" title="123"></a>
<a class="sourceLine" id="cb1-124" title="124"><span class="co">;; Assign a new value to previously defined variable</span></a>
<a class="sourceLine" id="cb1-125" title="125">(set! myvar <span class="dv">10</span>) </a>
<a class="sourceLine" id="cb1-126" title="126">myvar             <span class="co">;; =&gt; 10</span></a>
<a class="sourceLine" id="cb1-127" title="127"></a>
<a class="sourceLine" id="cb1-128" title="128"></a>
<a class="sourceLine" id="cb1-129" title="129"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-130" title="130"><span class="co">; 3. Collections</span></a>
<a class="sourceLine" id="cb1-131" title="131"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-132" title="132"></a>
<a class="sourceLine" id="cb1-133" title="133"><span class="co">;; Pairs</span></a>
<a class="sourceLine" id="cb1-134" title="134"><span class="co">;; &#39;cons&#39; constructs pairs, </span></a>
<a class="sourceLine" id="cb1-135" title="135"><span class="co">;; &#39;car&#39; extracts the first element, &#39;cdr&#39; extracts the rest of the elements</span></a>
<a class="sourceLine" id="cb1-136" title="136">(<span class="kw">cons</span> &#39;subject &#39;verb)       <span class="co">;; =&gt; &#39;(subject . verb)</span></a>
<a class="sourceLine" id="cb1-137" title="137">(<span class="kw">car</span> (<span class="kw">cons</span> &#39;subject &#39;verb)) <span class="co">;; =&gt; subject</span></a>
<a class="sourceLine" id="cb1-138" title="138">(<span class="kw">cdr</span> (<span class="kw">cons</span> &#39;subject &#39;verb)) <span class="co">;; =&gt; verb</span></a>
<a class="sourceLine" id="cb1-139" title="139"></a>
<a class="sourceLine" id="cb1-140" title="140"><span class="co">;; Lists</span></a>
<a class="sourceLine" id="cb1-141" title="141"><span class="co">;; cons creates a new list if the second item is a list</span></a>
<a class="sourceLine" id="cb1-142" title="142">(<span class="kw">cons</span> <span class="dv">0</span> &#39;())         <span class="co">;; =&gt; (0)</span></a>
<a class="sourceLine" id="cb1-143" title="143">(<span class="kw">cons</span> <span class="dv">1</span> (<span class="kw">cons</span> <span class="dv">2</span>  (<span class="kw">cons</span> <span class="dv">3</span> &#39;())))    <span class="co">;; =&gt; (1 2 3)</span></a>
<a class="sourceLine" id="cb1-144" title="144"><span class="co">;; &#39;list&#39; is a convenience variadic constructor for lists</span></a>
<a class="sourceLine" id="cb1-145" title="145">(<span class="kw">list</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)    <span class="co">;; =&gt; (1 2 3)</span></a>
<a class="sourceLine" id="cb1-146" title="146"></a>
<a class="sourceLine" id="cb1-147" title="147"></a>
<a class="sourceLine" id="cb1-148" title="148"><span class="co">;; Use &#39;append&#39; to append lists together</span></a>
<a class="sourceLine" id="cb1-149" title="149">(<span class="kw">append</span> &#39;(<span class="dv">1</span> <span class="dv">2</span>) &#39;(<span class="dv">3</span> <span class="dv">4</span>)) <span class="co">;; =&gt; (1 2 3 4)</span></a>
<a class="sourceLine" id="cb1-150" title="150"></a>
<a class="sourceLine" id="cb1-151" title="151"><span class="co">;; Some basic operations on lists</span></a>
<a class="sourceLine" id="cb1-152" title="152">(map add1 &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>))    <span class="co">;; =&gt; (2 3 4)</span></a>
<a class="sourceLine" id="cb1-153" title="153">(<span class="kw">reverse</span> &#39;(<span class="dv">1</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">7</span>))   <span class="co">;; =&gt; (7 4 3 1)</span></a>
<a class="sourceLine" id="cb1-154" title="154">(sort &#39;(<span class="dv">11</span> <span class="dv">22</span> <span class="dv">33</span> <span class="dv">44</span>) <span class="op">&gt;</span>)   <span class="co">;; =&gt; (44 33 22 11)</span></a>
<a class="sourceLine" id="cb1-155" title="155"></a>
<a class="sourceLine" id="cb1-156" title="156">(<span class="ex">define</span><span class="fu"> days </span>&#39;(SUN MON FRI))</a>
<a class="sourceLine" id="cb1-157" title="157">(<span class="kw">list-ref</span> days <span class="dv">1</span>)      <span class="co">;; =&gt; MON</span></a>
<a class="sourceLine" id="cb1-158" title="158">(set! (<span class="kw">list-ref</span> days <span class="dv">1</span>) &#39;TUE)</a>
<a class="sourceLine" id="cb1-159" title="159">days                   <span class="co">;; =&gt; (SUN TUE FRI)</span></a>
<a class="sourceLine" id="cb1-160" title="160"></a>
<a class="sourceLine" id="cb1-161" title="161"><span class="co">;; Vectors</span></a>
<a class="sourceLine" id="cb1-162" title="162"><span class="co">;; Vectors are heterogeneous structures whose elements are indexed by integers</span></a>
<a class="sourceLine" id="cb1-163" title="163"><span class="co">;; A Vector typically occupies less space than a list of the same length</span></a>
<a class="sourceLine" id="cb1-164" title="164"><span class="co">;; Random access of an element in a vector is faster than in a list</span></a>
<a class="sourceLine" id="cb1-165" title="165">#(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)                     <span class="co">;; =&gt; #(1 2 3) ;; literal syntax</span></a>
<a class="sourceLine" id="cb1-166" title="166">(<span class="kw">vector</span> &#39;a &#39;b &#39;c)            <span class="co">;; =&gt; #(a b c) </span></a>
<a class="sourceLine" id="cb1-167" title="167">(<span class="kw">vector?</span> #(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>))           <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-168" title="168">(<span class="kw">vector-length</span> #(<span class="dv">1</span> (<span class="dv">2</span>) <span class="st">&quot;a&quot;</span>)) <span class="co">;; =&gt; 3</span></a>
<a class="sourceLine" id="cb1-169" title="169">(<span class="kw">vector-ref</span> #(<span class="dv">1</span> (<span class="dv">2</span>) (<span class="dv">3</span> <span class="dv">3</span>)) <span class="dv">2</span>)<span class="co">;; =&gt; (3 3)</span></a>
<a class="sourceLine" id="cb1-170" title="170"></a>
<a class="sourceLine" id="cb1-171" title="171">(<span class="ex">define</span><span class="fu"> vec </span>#(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb1-172" title="172">(<span class="kw">vector-set!</span> vec <span class="dv">2</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1-173" title="173">vec                         <span class="co">;; =&gt; #(1 2 4)</span></a>
<a class="sourceLine" id="cb1-174" title="174"></a>
<a class="sourceLine" id="cb1-175" title="175"><span class="co">;; Vectors can be created from lists and vice-verca</span></a>
<a class="sourceLine" id="cb1-176" title="176">(vector-&gt;list #(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">4</span>))     <span class="co">;; =&gt; &#39;(1 2 4)</span></a>
<a class="sourceLine" id="cb1-177" title="177">(list-&gt;vector &#39;(a b c))     <span class="co">;; =&gt; #(a b c)</span></a>
<a class="sourceLine" id="cb1-178" title="178"></a>
<a class="sourceLine" id="cb1-179" title="179"></a>
<a class="sourceLine" id="cb1-180" title="180"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-181" title="181"><span class="co">; 4. Functions</span></a>
<a class="sourceLine" id="cb1-182" title="182"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-183" title="183"></a>
<a class="sourceLine" id="cb1-184" title="184"><span class="co">;; Use &#39;lambda&#39; to create functions.</span></a>
<a class="sourceLine" id="cb1-185" title="185"><span class="co">;; A function always returns the value of its last expression</span></a>
<a class="sourceLine" id="cb1-186" title="186">(<span class="kw">lambda</span> () <span class="st">&quot;Hello World&quot;</span>)   <span class="co">;; =&gt; #&lt;procedure (?)&gt; </span></a>
<a class="sourceLine" id="cb1-187" title="187"></a>
<a class="sourceLine" id="cb1-188" title="188"><span class="co">;; Use extra parens around function definition to execute </span></a>
<a class="sourceLine" id="cb1-189" title="189">((<span class="kw">lambda</span> () <span class="st">&quot;Hello World&quot;</span>)) <span class="co">;; =&gt; Hello World ;; argument list is empty</span></a>
<a class="sourceLine" id="cb1-190" title="190"></a>
<a class="sourceLine" id="cb1-191" title="191"><span class="co">;; A function with an argument</span></a>
<a class="sourceLine" id="cb1-192" title="192">((<span class="kw">lambda</span> (x) (* x x)) <span class="dv">3</span>)           <span class="co">;; =&gt; 9</span></a>
<a class="sourceLine" id="cb1-193" title="193"><span class="co">;; A function with two arguments</span></a>
<a class="sourceLine" id="cb1-194" title="194">((<span class="kw">lambda</span> (x y) (* x y)) <span class="dv">2</span> <span class="dv">3</span>)       <span class="co">;; =&gt; 6</span></a>
<a class="sourceLine" id="cb1-195" title="195"></a>
<a class="sourceLine" id="cb1-196" title="196"><span class="co">;; assign a function to a variable</span></a>
<a class="sourceLine" id="cb1-197" title="197">(<span class="ex">define</span><span class="fu"> sqr </span>(<span class="kw">lambda</span> (x) (* x x)))</a>
<a class="sourceLine" id="cb1-198" title="198">sqr                        <span class="co">;; =&gt; #&lt;procedure (sqr x)&gt;</span></a>
<a class="sourceLine" id="cb1-199" title="199">(sqr <span class="dv">3</span>)                    <span class="co">;; =&gt; 9</span></a>
<a class="sourceLine" id="cb1-200" title="200"></a>
<a class="sourceLine" id="cb1-201" title="201"><span class="co">;; We can shorten this using the function definition syntactic sugar</span></a>
<a class="sourceLine" id="cb1-202" title="202">(<span class="ex">define</span><span class="fu"> </span>(sqr x) (* x x))</a>
<a class="sourceLine" id="cb1-203" title="203">(sqr <span class="dv">3</span>)                    <span class="co">;; =&gt; 9</span></a>
<a class="sourceLine" id="cb1-204" title="204"></a>
<a class="sourceLine" id="cb1-205" title="205"><span class="co">;; We can redefine existing procedures</span></a>
<a class="sourceLine" id="cb1-206" title="206">(foldl <span class="kw">cons</span> &#39;() &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>)) <span class="co">;; =&gt; (((((() . 1) . 2) . 3) . 4) . 5)</span></a>
<a class="sourceLine" id="cb1-207" title="207">(<span class="ex">define</span><span class="fu"> </span>(foldl func accu alist)</a>
<a class="sourceLine" id="cb1-208" title="208">  (<span class="kw">if</span> (<span class="kw">null?</span> alist)</a>
<a class="sourceLine" id="cb1-209" title="209">    accu</a>
<a class="sourceLine" id="cb1-210" title="210">    (foldl func (func (<span class="kw">car</span> alist) accu) (<span class="kw">cdr</span> alist))))</a>
<a class="sourceLine" id="cb1-211" title="211"></a>
<a class="sourceLine" id="cb1-212" title="212">(foldl <span class="kw">cons</span> &#39;() &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>))   <span class="co">;; =&gt; (5 4 3 2 1)</span></a>
<a class="sourceLine" id="cb1-213" title="213"></a>
<a class="sourceLine" id="cb1-214" title="214"></a>
<a class="sourceLine" id="cb1-215" title="215"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-216" title="216"><span class="co">; 5. Equality</span></a>
<a class="sourceLine" id="cb1-217" title="217"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-218" title="218"></a>
<a class="sourceLine" id="cb1-219" title="219"><span class="co">;; For numbers use &#39;=&#39;</span></a>
<a class="sourceLine" id="cb1-220" title="220">(<span class="op">=</span> <span class="dv">3</span> <span class="fl">3.0</span>)                  <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-221" title="221">(<span class="op">=</span> <span class="dv">2</span> <span class="dv">1</span>)                    <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-222" title="222"></a>
<a class="sourceLine" id="cb1-223" title="223"><span class="co">;; &#39;eq?&#39; returns #t if two arguments refer to the same object in memory</span></a>
<a class="sourceLine" id="cb1-224" title="224"><span class="co">;; In other words, it&#39;s a simple pointer comparison.</span></a>
<a class="sourceLine" id="cb1-225" title="225">(<span class="kw">eq?</span> &#39;() &#39;())              <span class="co">;; =&gt; #t ;; there&#39;s only one empty list in memory</span></a>
<a class="sourceLine" id="cb1-226" title="226">(<span class="kw">eq?</span> (<span class="kw">list</span> <span class="dv">3</span>) (<span class="kw">list</span> <span class="dv">3</span>))    <span class="co">;; =&gt; #f ;; not the same object</span></a>
<a class="sourceLine" id="cb1-227" title="227">(<span class="kw">eq?</span> &#39;yes &#39;yes)            <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-228" title="228">(<span class="kw">eq?</span> <span class="dv">3</span> <span class="dv">3</span>)                  <span class="co">;; =&gt; #t ;; don&#39;t do this even if it works in this case</span></a>
<a class="sourceLine" id="cb1-229" title="229">(<span class="kw">eq?</span> <span class="dv">3</span> <span class="fl">3.0</span>)                <span class="co">;; =&gt; #f ;; it&#39;s better to use &#39;=&#39; for number comparisons</span></a>
<a class="sourceLine" id="cb1-230" title="230">(<span class="kw">eq?</span> <span class="st">&quot;Hello&quot;</span> <span class="st">&quot;Hello&quot;</span>)      <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-231" title="231"></a>
<a class="sourceLine" id="cb1-232" title="232"><span class="co">;; &#39;eqv?&#39; is same as &#39;eq?&#39; all datatypes except numbers and characters</span></a>
<a class="sourceLine" id="cb1-233" title="233">(<span class="kw">eqv?</span> <span class="dv">3</span> <span class="fl">3.0</span>)               <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-234" title="234">(<span class="kw">eqv?</span> (<span class="kw">expt</span> <span class="dv">2</span> <span class="dv">3</span>) (<span class="kw">expt</span> <span class="dv">2</span> <span class="dv">3</span>)) <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-235" title="235">(<span class="kw">eqv?</span> &#39;yes &#39;yes)           <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-236" title="236"></a>
<a class="sourceLine" id="cb1-237" title="237"><span class="co">;; &#39;equal?&#39; recursively compares the contents of pairs, vectors, and strings,</span></a>
<a class="sourceLine" id="cb1-238" title="238"><span class="co">;; applying eqv? on other objects such as numbers and symbols. </span></a>
<a class="sourceLine" id="cb1-239" title="239"><span class="co">;; A rule of thumb is that objects are generally equal? if they print the same.</span></a>
<a class="sourceLine" id="cb1-240" title="240"></a>
<a class="sourceLine" id="cb1-241" title="241">(<span class="kw">equal?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>) &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)) <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-242" title="242">(<span class="kw">equal?</span> #(a b c) #(a b c)) <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-243" title="243">(<span class="kw">equal?</span> &#39;a &#39;a)             <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-244" title="244">(<span class="kw">equal?</span> <span class="st">&quot;abc&quot;</span> <span class="st">&quot;abc&quot;</span>)       <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-245" title="245"></a>
<a class="sourceLine" id="cb1-246" title="246"><span class="co">;; In Summary:</span></a>
<a class="sourceLine" id="cb1-247" title="247"><span class="co">;; eq? tests if objects are identical</span></a>
<a class="sourceLine" id="cb1-248" title="248"><span class="co">;; eqv? tests if objects are operationally equivalent</span></a>
<a class="sourceLine" id="cb1-249" title="249"><span class="co">;; equal? tests if objects have same structure and contents</span></a>
<a class="sourceLine" id="cb1-250" title="250"></a>
<a class="sourceLine" id="cb1-251" title="251"><span class="co">;; Comparing strings for equality</span></a>
<a class="sourceLine" id="cb1-252" title="252">(<span class="kw">string=?</span> <span class="st">&quot;Hello&quot;</span> <span class="st">&quot;Hello&quot;</span>) <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-253" title="253"></a>
<a class="sourceLine" id="cb1-254" title="254"></a>
<a class="sourceLine" id="cb1-255" title="255"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-256" title="256"><span class="co">; 6. Control Flow</span></a>
<a class="sourceLine" id="cb1-257" title="257"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-258" title="258"></a>
<a class="sourceLine" id="cb1-259" title="259"><span class="co">;; Conditionals</span></a>
<a class="sourceLine" id="cb1-260" title="260">(<span class="kw">if</span> <span class="dv">#t</span>                     <span class="co">;; test expression</span></a>
<a class="sourceLine" id="cb1-261" title="261">  <span class="st">&quot;True&quot;</span>                   <span class="co">;; then expression</span></a>
<a class="sourceLine" id="cb1-262" title="262">  <span class="st">&quot;False&quot;</span>)                 <span class="co">;; else expression</span></a>
<a class="sourceLine" id="cb1-263" title="263">                           <span class="co">;; =&gt; &quot;True&quot;</span></a>
<a class="sourceLine" id="cb1-264" title="264"></a>
<a class="sourceLine" id="cb1-265" title="265">(<span class="kw">if</span> (<span class="op">&gt;</span> <span class="dv">3</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-266" title="266">  <span class="st">&quot;yes&quot;</span></a>
<a class="sourceLine" id="cb1-267" title="267">  <span class="st">&quot;no&quot;</span>)                    <span class="co">;; =&gt; &quot;yes&quot;</span></a>
<a class="sourceLine" id="cb1-268" title="268"></a>
<a class="sourceLine" id="cb1-269" title="269"><span class="co">;; In conditionals, all values that are not &#39;#f&#39; are treated as true.</span></a>
<a class="sourceLine" id="cb1-270" title="270"><span class="co">;; 0, &#39;(), #() &quot;&quot; , are all true values</span></a>
<a class="sourceLine" id="cb1-271" title="271">(<span class="kw">if</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-272" title="272">  <span class="st">&quot;0 is not false&quot;</span></a>
<a class="sourceLine" id="cb1-273" title="273">  <span class="st">&quot;0 is false&quot;</span>)            <span class="co">;; =&gt; &quot;0 is not false&quot;</span></a>
<a class="sourceLine" id="cb1-274" title="274"></a>
<a class="sourceLine" id="cb1-275" title="275"><span class="co">;; &#39;cond&#39; chains a series of tests and returns as soon as it encounters a true condition</span></a>
<a class="sourceLine" id="cb1-276" title="276"><span class="co">;; &#39;cond&#39; can be used to simulate &#39;if/elseif/else&#39; statements</span></a>
<a class="sourceLine" id="cb1-277" title="277">(<span class="kw">cond</span> ((<span class="op">&gt;</span> <span class="dv">2</span> <span class="dv">2</span>) <span class="st">&quot;not true so don&#39;t return this&quot;</span>)</a>
<a class="sourceLine" id="cb1-278" title="278">      ((<span class="op">&lt;</span> <span class="dv">2</span> <span class="dv">5</span>) <span class="st">&quot;true, so return this&quot;</span>)</a>
<a class="sourceLine" id="cb1-279" title="279">      (<span class="kw">else</span> <span class="st">&quot;returning default&quot;</span>))    <span class="co">;; =&gt; &quot;true, so return this&quot;</span></a>
<a class="sourceLine" id="cb1-280" title="280"></a>
<a class="sourceLine" id="cb1-281" title="281"></a>
<a class="sourceLine" id="cb1-282" title="282"><span class="co">;; A case expression is evaluated as follows:</span></a>
<a class="sourceLine" id="cb1-283" title="283"><span class="co">;; The key is evaluated and compared with each datum in sense of &#39;eqv?&#39;,</span></a>
<a class="sourceLine" id="cb1-284" title="284"><span class="co">;; The corresponding clause in the matching datum is evaluated and returned as result</span></a>
<a class="sourceLine" id="cb1-285" title="285">(<span class="kw">case</span> (* <span class="dv">2</span> <span class="dv">3</span>)              <span class="co">;; the key is 6</span></a>
<a class="sourceLine" id="cb1-286" title="286">  ((<span class="dv">2</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">7</span>) &#39;prime)       <span class="co">;; datum 1</span></a>
<a class="sourceLine" id="cb1-287" title="287">  ((<span class="dv">1</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">8</span>) &#39;composite))  <span class="co">;; datum 2; matched!</span></a>
<a class="sourceLine" id="cb1-288" title="288">                           <span class="co">;; =&gt; composite</span></a>
<a class="sourceLine" id="cb1-289" title="289"></a>
<a class="sourceLine" id="cb1-290" title="290"><span class="co">;; case with else clause</span></a>
<a class="sourceLine" id="cb1-291" title="291">(<span class="kw">case</span> (<span class="kw">car</span> &#39;(c d))</a>
<a class="sourceLine" id="cb1-292" title="292">  ((a e i o u) &#39;vowel)</a>
<a class="sourceLine" id="cb1-293" title="293">  ((w y) &#39;semivowel)</a>
<a class="sourceLine" id="cb1-294" title="294">  (<span class="kw">else</span> &#39;consonant))       <span class="co">;; =&gt;  consonant</span></a>
<a class="sourceLine" id="cb1-295" title="295"></a>
<a class="sourceLine" id="cb1-296" title="296"><span class="co">;; Boolean expressions</span></a>
<a class="sourceLine" id="cb1-297" title="297"><span class="co">;; &#39;and&#39; returns the first expression that evaluates to #f</span></a>
<a class="sourceLine" id="cb1-298" title="298"><span class="co">;; otherwise, it returns the result of the last expression</span></a>
<a class="sourceLine" id="cb1-299" title="299">(<span class="kw">and</span> <span class="dv">#t</span> <span class="dv">#f</span> (<span class="op">=</span> <span class="dv">2</span> <span class="fl">2.0</span>))                <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-300" title="300">(<span class="kw">and</span> (<span class="op">&lt;</span> <span class="dv">2</span> <span class="dv">5</span>) (<span class="op">&gt;</span> <span class="dv">2</span> <span class="dv">0</span>) <span class="st">&quot;0 &lt; 2 &lt; 5&quot;</span>)    <span class="co">;; =&gt; &quot;0 &lt; 2 &lt; 5&quot;</span></a>
<a class="sourceLine" id="cb1-301" title="301"></a>
<a class="sourceLine" id="cb1-302" title="302"><span class="co">;; &#39;or&#39; returns the first expression that evaluates to #t </span></a>
<a class="sourceLine" id="cb1-303" title="303"><span class="co">;; otherwise the result of the last expression is returned</span></a>
<a class="sourceLine" id="cb1-304" title="304">(<span class="kw">or</span> <span class="dv">#f</span> <span class="dv">#t</span> <span class="dv">#f</span>)                        <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-305" title="305">(<span class="kw">or</span> <span class="dv">#f</span> <span class="dv">#f</span> <span class="dv">#f</span>)                        <span class="co">;; =&gt; #f</span></a>
<a class="sourceLine" id="cb1-306" title="306"></a>
<a class="sourceLine" id="cb1-307" title="307"><span class="co">;; &#39;when&#39; is like &#39;if&#39; without the else expression</span></a>
<a class="sourceLine" id="cb1-308" title="308">(when (<span class="kw">positive?</span> <span class="dv">5</span>) <span class="st">&quot;I&#39;m positive&quot;</span>)  <span class="co">;; =&gt; &quot;I&#39;m positive&quot;</span></a>
<a class="sourceLine" id="cb1-309" title="309"></a>
<a class="sourceLine" id="cb1-310" title="310"><span class="co">;; &#39;unless&#39; is equivalent to (when (not &lt;test&gt;) &lt;expr&gt;)</span></a>
<a class="sourceLine" id="cb1-311" title="311">(unless (<span class="kw">null?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)) <span class="st">&quot;not null&quot;</span>) <span class="co">;; =&gt; &quot;not null&quot;</span></a>
<a class="sourceLine" id="cb1-312" title="312"></a>
<a class="sourceLine" id="cb1-313" title="313"></a>
<a class="sourceLine" id="cb1-314" title="314"><span class="co">;; Loops</span></a>
<a class="sourceLine" id="cb1-315" title="315"><span class="co">;; loops can be created with the help of tail-recursions</span></a>
<a class="sourceLine" id="cb1-316" title="316">(<span class="ex">define</span><span class="fu"> </span>(loop count)</a>
<a class="sourceLine" id="cb1-317" title="317">  (unless (<span class="op">=</span> count <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-318" title="318">    (print <span class="st">&quot;hello&quot;</span>) </a>
<a class="sourceLine" id="cb1-319" title="319">    (loop (sub1 count))))</a>
<a class="sourceLine" id="cb1-320" title="320">(loop <span class="dv">4</span>)                             <span class="co">;; =&gt; hello, hello ...</span></a>
<a class="sourceLine" id="cb1-321" title="321"></a>
<a class="sourceLine" id="cb1-322" title="322"><span class="co">;; Or with a named let</span></a>
<a class="sourceLine" id="cb1-323" title="323">(<span class="kw">let</span> loop ((i <span class="dv">0</span>) (limit <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb1-324" title="324">  (when (<span class="op">&lt;</span> i limit)</a>
<a class="sourceLine" id="cb1-325" title="325">    (printf <span class="st">&quot;i = ~a\n&quot;</span> i)</a>
<a class="sourceLine" id="cb1-326" title="326">    (loop (add1 i) limit)))          <span class="co">;; =&gt; i = 0, i = 1....</span></a>
<a class="sourceLine" id="cb1-327" title="327"></a>
<a class="sourceLine" id="cb1-328" title="328"><span class="co">;; &#39;do&#39; is another iteration construct</span></a>
<a class="sourceLine" id="cb1-329" title="329"><span class="co">;; It initializes a set of variables and updates them in each iteration</span></a>
<a class="sourceLine" id="cb1-330" title="330"><span class="co">;; A final expression is evaluated after the exit condition is met</span></a>
<a class="sourceLine" id="cb1-331" title="331">(<span class="kw">do</span> ((x <span class="dv">0</span> (add1 x )))            <span class="co">;; initialize x = 0 and add 1 in each iteration</span></a>
<a class="sourceLine" id="cb1-332" title="332">  ((<span class="op">=</span> x <span class="dv">10</span>) (print <span class="st">&quot;done&quot;</span>))      <span class="co">;; exit condition and final expression</span></a>
<a class="sourceLine" id="cb1-333" title="333">  (print x))                     <span class="co">;; command to execute in each step</span></a>
<a class="sourceLine" id="cb1-334" title="334">                                 <span class="co">;; =&gt; 0,1,2,3....9,done</span></a>
<a class="sourceLine" id="cb1-335" title="335"></a>
<a class="sourceLine" id="cb1-336" title="336"><span class="co">;; Iteration over lists </span></a>
<a class="sourceLine" id="cb1-337" title="337">(<span class="kw">for-each</span> (<span class="kw">lambda</span> (a) (print (* a a)))</a>
<a class="sourceLine" id="cb1-338" title="338">          &#39;(<span class="dv">3</span> <span class="dv">5</span> <span class="dv">7</span>))                  <span class="co">;; =&gt; 9, 25, 49</span></a>
<a class="sourceLine" id="cb1-339" title="339"></a>
<a class="sourceLine" id="cb1-340" title="340"><span class="co">;; &#39;map&#39; is like for-each but returns a list</span></a>
<a class="sourceLine" id="cb1-341" title="341">(map add1 &#39;(<span class="dv">11</span> <span class="dv">22</span> <span class="dv">33</span>))               <span class="co">;; =&gt; (12 23 34)</span></a>
<a class="sourceLine" id="cb1-342" title="342"></a>
<a class="sourceLine" id="cb1-343" title="343"></a>
<a class="sourceLine" id="cb1-344" title="344"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-345" title="345"><span class="co">; 7. Extensions</span></a>
<a class="sourceLine" id="cb1-346" title="346"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-347" title="347"></a>
<a class="sourceLine" id="cb1-348" title="348"><span class="co">;; The CHICKEN core is very minimal, but additional features are provided by library extensions known as Eggs.</span></a>
<a class="sourceLine" id="cb1-349" title="349"><span class="co">;; You can install Eggs with &#39;chicken-install &lt;eggname&gt;&#39; command.</span></a>
<a class="sourceLine" id="cb1-350" title="350"></a>
<a class="sourceLine" id="cb1-351" title="351"><span class="co">;; &#39;numbers&#39; egg provides support for full numeric tower.</span></a>
<a class="sourceLine" id="cb1-352" title="352">(require-extension numbers)</a>
<a class="sourceLine" id="cb1-353" title="353"><span class="co">;; complex numbers</span></a>
<a class="sourceLine" id="cb1-354" title="354"><span class="dv">3</span>+4i                               <span class="co">;; =&gt; 3+2i</span></a>
<a class="sourceLine" id="cb1-355" title="355"><span class="co">;; Supports fractions without falling back to inexact flonums</span></a>
<a class="sourceLine" id="cb1-356" title="356"><span class="dv">1</span>/<span class="dv">3</span>                                <span class="co">;; =&gt; 1/3</span></a>
<a class="sourceLine" id="cb1-357" title="357"><span class="co">;; provides support for large integers through bignums</span></a>
<a class="sourceLine" id="cb1-358" title="358">(<span class="kw">expt</span> <span class="dv">9</span> <span class="dv">20</span>)                        <span class="co">;; =&gt; 12157665459056928801 </span></a>
<a class="sourceLine" id="cb1-359" title="359"><span class="co">;; And other &#39;extended&#39; functions</span></a>
<a class="sourceLine" id="cb1-360" title="360">(<span class="kw">log</span> <span class="dv">10</span> (<span class="kw">exp</span> <span class="dv">1</span>))                   <span class="co">;; =&gt; 2.30258509299405</span></a>
<a class="sourceLine" id="cb1-361" title="361">(<span class="kw">numerator</span> <span class="dv">2</span>/<span class="dv">3</span>)                    <span class="co">;; =&gt; 2</span></a>
<a class="sourceLine" id="cb1-362" title="362"></a>
<a class="sourceLine" id="cb1-363" title="363"><span class="co">;; &#39;utf8&#39; provides unicode support</span></a>
<a class="sourceLine" id="cb1-364" title="364">(require-extension utf8)</a>
<a class="sourceLine" id="cb1-365" title="365"><span class="st">&quot;\u03BBx:(\u03BC\u0251.\u0251\u2192\u0251).xx&quot;</span> <span class="co">;; =&gt; &quot;λx:(μɑ.ɑ→ɑ).xx&quot;</span></a>
<a class="sourceLine" id="cb1-366" title="366"></a>
<a class="sourceLine" id="cb1-367" title="367"><span class="co">;; &#39;posix&#39; provides file I/O and lots of other services for unix-like operating systems</span></a>
<a class="sourceLine" id="cb1-368" title="368"><span class="co">;; Some of the functions are not available in Windows system,</span></a>
<a class="sourceLine" id="cb1-369" title="369"><span class="co">;; See http://wiki.call-cc.org/man/4/Unit%20posix for more details</span></a>
<a class="sourceLine" id="cb1-370" title="370"></a>
<a class="sourceLine" id="cb1-371" title="371"><span class="co">;; Open a file to append, open &quot;write only&quot; and create file if it does not exist</span></a>
<a class="sourceLine" id="cb1-372" title="372">(<span class="ex">define</span><span class="fu"> outfn </span>(file-open <span class="st">&quot;chicken-hen.txt&quot;</span> (<span class="op">+</span> open/append open/wronly open/creat)))</a>
<a class="sourceLine" id="cb1-373" title="373"><span class="co">;; write some text to the file</span></a>
<a class="sourceLine" id="cb1-374" title="374">(file-write outfn <span class="st">&quot;Did chicken came before hen?&quot;</span>) </a>
<a class="sourceLine" id="cb1-375" title="375"><span class="co">;; close the file</span></a>
<a class="sourceLine" id="cb1-376" title="376">(file-close outfn)</a>
<a class="sourceLine" id="cb1-377" title="377"><span class="co">;; Open the file &quot;read only&quot;</span></a>
<a class="sourceLine" id="cb1-378" title="378">(<span class="ex">define</span><span class="fu"> infn </span>(file-open <span class="st">&quot;chicken-hen.txt&quot;</span> open/rdonly))</a>
<a class="sourceLine" id="cb1-379" title="379"><span class="co">;; read some text from the file</span></a>
<a class="sourceLine" id="cb1-380" title="380">(file-read infn <span class="dv">30</span>)         <span class="co">;; =&gt; (&quot;Did chicken came before hen?  &quot;, 28)</span></a>
<a class="sourceLine" id="cb1-381" title="381">(file-close infn)</a>
<a class="sourceLine" id="cb1-382" title="382"></a>
<a class="sourceLine" id="cb1-383" title="383"><span class="co">;; CHICKEN also supports SRFI (Scheme Requests For Implementation) extensions</span></a>
<a class="sourceLine" id="cb1-384" title="384"><span class="co">;; See &#39;http://srfi.schemers.org/srfi-implementers.html&quot; to see srfi&#39;s supported by CHICKEN</span></a>
<a class="sourceLine" id="cb1-385" title="385">(require-extension srfi<span class="dv">-1</span>)         <span class="co">;; list library</span></a>
<a class="sourceLine" id="cb1-386" title="386">(filter <span class="kw">odd?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span>))     <span class="co">;; =&gt; (1 3 5 7)</span></a>
<a class="sourceLine" id="cb1-387" title="387">(count <span class="kw">even?</span> &#39;(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>))         <span class="co">;; =&gt; 2</span></a>
<a class="sourceLine" id="cb1-388" title="388">(take &#39;(<span class="dv">12</span> <span class="dv">24</span> <span class="dv">36</span> <span class="dv">48</span> <span class="dv">60</span>) <span class="dv">3</span>)         <span class="co">;; =&gt; (12 24 36)</span></a>
<a class="sourceLine" id="cb1-389" title="389">(drop &#39;(<span class="dv">12</span> <span class="dv">24</span> <span class="dv">36</span> <span class="dv">48</span> <span class="dv">60</span>) <span class="dv">2</span>)         <span class="co">;; =&gt; (36 48 60)</span></a>
<a class="sourceLine" id="cb1-390" title="390">(circular-list &#39;z &#39;q)              <span class="co">;; =&gt; z q z q ...</span></a>
<a class="sourceLine" id="cb1-391" title="391"></a>
<a class="sourceLine" id="cb1-392" title="392">(require-extension srfi<span class="dv">-13</span>)        <span class="co">;; string library</span></a>
<a class="sourceLine" id="cb1-393" title="393">(string-reverse <span class="st">&quot;pan&quot;</span>)             <span class="co">;; =&gt; &quot;nap&quot;</span></a>
<a class="sourceLine" id="cb1-394" title="394">(string-index <span class="st">&quot;Turkey&quot;</span> <span class="ch">#\k</span>)        <span class="co">;; =&gt; 3</span></a>
<a class="sourceLine" id="cb1-395" title="395">(string-every <span class="kw">char-upper-case?</span> <span class="st">&quot;CHICKEN&quot;</span>) <span class="co">;; =&gt; #t</span></a>
<a class="sourceLine" id="cb1-396" title="396">(string-join &#39;(<span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span>) <span class="st">&quot;:&quot;</span>)    <span class="co">;; =&gt; &quot;foo:bar:baz&quot;</span></a>
<a class="sourceLine" id="cb1-397" title="397"></a>
<a class="sourceLine" id="cb1-398" title="398"></a>
<a class="sourceLine" id="cb1-399" title="399"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-400" title="400"><span class="co">; 8. Macros</span></a>
<a class="sourceLine" id="cb1-401" title="401"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-402" title="402"></a>
<a class="sourceLine" id="cb1-403" title="403"><span class="co">;; A &#39;for .. in ..&#39; iteration like python, for lists</span></a>
<a class="sourceLine" id="cb1-404" title="404">(<span class="ex">define-syntax</span><span class="fu"> for</span></a>
<a class="sourceLine" id="cb1-405" title="405">  (<span class="kw">syntax-rules</span> (in)</a>
<a class="sourceLine" id="cb1-406" title="406">                ((for elem in alist body ...)</a>
<a class="sourceLine" id="cb1-407" title="407">                 (<span class="kw">for-each</span> (<span class="kw">lambda</span> (elem) body ...) alist))))</a>
<a class="sourceLine" id="cb1-408" title="408"></a>
<a class="sourceLine" id="cb1-409" title="409">(for x in &#39;(<span class="dv">2</span> <span class="dv">4</span> <span class="dv">8</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb1-410" title="410">     (print x))          <span class="co">;; =&gt; 2, 4, 8, 16</span></a>
<a class="sourceLine" id="cb1-411" title="411"></a>
<a class="sourceLine" id="cb1-412" title="412">(for chr in (<span class="kw">string-&gt;list</span> <span class="st">&quot;PENCHANT&quot;</span>)</a>
<a class="sourceLine" id="cb1-413" title="413">     (print chr))        <span class="co">;; =&gt; P, E, N, C, H, A, N, T</span></a>
<a class="sourceLine" id="cb1-414" title="414"></a>
<a class="sourceLine" id="cb1-415" title="415"><span class="co">;; While loop</span></a>
<a class="sourceLine" id="cb1-416" title="416">(<span class="ex">define-syntax</span><span class="fu"> while</span></a>
<a class="sourceLine" id="cb1-417" title="417">  (<span class="kw">syntax-rules</span> ()</a>
<a class="sourceLine" id="cb1-418" title="418">                ((<span class="kw">while</span> <span class="kw">cond</span> body ...)</a>
<a class="sourceLine" id="cb1-419" title="419">                 (<span class="kw">let</span> loop ()</a>
<a class="sourceLine" id="cb1-420" title="420">                   (when <span class="kw">cond</span></a>
<a class="sourceLine" id="cb1-421" title="421">                     body ...</a>
<a class="sourceLine" id="cb1-422" title="422">                     (loop))))))</a>
<a class="sourceLine" id="cb1-423" title="423"></a>
<a class="sourceLine" id="cb1-424" title="424">(<span class="kw">let</span> ((str <span class="st">&quot;PENCHANT&quot;</span>) (i <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb1-425" title="425">  (<span class="kw">while</span> (<span class="op">&lt;</span> i (<span class="kw">string-length</span> str))     <span class="co">;; while (condition)</span></a>
<a class="sourceLine" id="cb1-426" title="426">         (print (<span class="kw">string-ref</span> str i))    <span class="co">;; body </span></a>
<a class="sourceLine" id="cb1-427" title="427">         (set! i (add1 i))))           </a>
<a class="sourceLine" id="cb1-428" title="428">                                       <span class="co">;; =&gt; P, E, N, C, H, A, N, T</span></a>
<a class="sourceLine" id="cb1-429" title="429"></a>
<a class="sourceLine" id="cb1-430" title="430"><span class="co">;; Advanced Syntax-Rules Primer -&gt; http://petrofsky.org/src/primer.txt</span></a>
<a class="sourceLine" id="cb1-431" title="431"><span class="co">;; Macro system in chicken -&gt; http://lists.gnu.org/archive/html/chicken-users/2008-04/msg00013.html</span></a>
<a class="sourceLine" id="cb1-432" title="432"></a>
<a class="sourceLine" id="cb1-433" title="433"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-434" title="434"><span class="co">; 9. Modules</span></a>
<a class="sourceLine" id="cb1-435" title="435"><span class="co">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span></a>
<a class="sourceLine" id="cb1-436" title="436"></a>
<a class="sourceLine" id="cb1-437" title="437"><span class="co">;; Also See http://wiki.call-cc.org/man/4/Modules</span></a>
<a class="sourceLine" id="cb1-438" title="438"></a>
<a class="sourceLine" id="cb1-439" title="439"><span class="co">;; The &#39;test&#39; module exports a value named &#39;hello&#39; and a macro named &#39;greet&#39;</span></a>
<a class="sourceLine" id="cb1-440" title="440">(module test (hello greet)</a>
<a class="sourceLine" id="cb1-441" title="441">  (import scheme)</a>
<a class="sourceLine" id="cb1-442" title="442"></a>
<a class="sourceLine" id="cb1-443" title="443">  (<span class="ex">define-syntax</span><span class="fu"> greet</span></a>
<a class="sourceLine" id="cb1-444" title="444">    (<span class="kw">syntax-rules</span> ()</a>
<a class="sourceLine" id="cb1-445" title="445">      ((_ whom) </a>
<a class="sourceLine" id="cb1-446" title="446">       (<span class="kw">begin</span></a>
<a class="sourceLine" id="cb1-447" title="447">         (<span class="kw">display</span> <span class="st">&quot;Hello, &quot;</span>)</a>
<a class="sourceLine" id="cb1-448" title="448">         (<span class="kw">display</span> whom)</a>
<a class="sourceLine" id="cb1-449" title="449">         (<span class="kw">display</span> <span class="st">&quot; !\n&quot;</span>) ) ) ) )</a>
<a class="sourceLine" id="cb1-450" title="450"></a>
<a class="sourceLine" id="cb1-451" title="451">  (<span class="ex">define</span><span class="fu"> </span>(hello)</a>
<a class="sourceLine" id="cb1-452" title="452">    (greet <span class="st">&quot;world&quot;</span>) )  )</a>
<a class="sourceLine" id="cb1-453" title="453"></a>
<a class="sourceLine" id="cb1-454" title="454"><span class="co">;; we can define our modules in a separate file (say test.scm) and load them to the interpreter with</span></a>
<a class="sourceLine" id="cb1-455" title="455"><span class="co">;;         (load &quot;test.scm&quot;)</span></a>
<a class="sourceLine" id="cb1-456" title="456"></a>
<a class="sourceLine" id="cb1-457" title="457"><span class="co">;; import the module</span></a>
<a class="sourceLine" id="cb1-458" title="458">(import test)</a>
<a class="sourceLine" id="cb1-459" title="459">(hello)                <span class="co">;; =&gt; Hello, world !</span></a>
<a class="sourceLine" id="cb1-460" title="460">(greet <span class="st">&quot;schemers&quot;</span>)     <span class="co">;; =&gt; Hello, schemers !</span></a>
<a class="sourceLine" id="cb1-461" title="461"></a>
<a class="sourceLine" id="cb1-462" title="462"><span class="co">;; We can compile the module files in to shared libraries by using following command,</span></a>
<a class="sourceLine" id="cb1-463" title="463"><span class="co">;;         csc -s test.scm</span></a>
<a class="sourceLine" id="cb1-464" title="464"><span class="co">;;         (load &quot;test.so&quot;)</span></a>
<a class="sourceLine" id="cb1-465" title="465"></a>
<a class="sourceLine" id="cb1-466" title="466"><span class="co">;; Functors</span></a>
<a class="sourceLine" id="cb1-467" title="467"><span class="co">;; Functors are high level modules that can be parameterized by other modules</span></a>
<a class="sourceLine" id="cb1-468" title="468"><span class="co">;; Following functor requires another module named &#39;M&#39; that provides a function called &#39;multiply&#39;</span></a>
<a class="sourceLine" id="cb1-469" title="469"><span class="co">;; The functor itself exports a generic function &#39;square&#39;</span></a>
<a class="sourceLine" id="cb1-470" title="470">(functor (squaring-functor (M (multiply))) (square)</a>
<a class="sourceLine" id="cb1-471" title="471">         (import scheme M) </a>
<a class="sourceLine" id="cb1-472" title="472">         (<span class="ex">define</span><span class="fu"> </span>(square x) (multiply x x)))</a>
<a class="sourceLine" id="cb1-473" title="473"></a>
<a class="sourceLine" id="cb1-474" title="474"><span class="co">;; Module &#39;nums&#39; can be passed as a parameter to &#39;squaring-functor&#39;</span></a>
<a class="sourceLine" id="cb1-475" title="475">(module nums (multiply) </a>
<a class="sourceLine" id="cb1-476" title="476">        (import scheme)     <span class="co">;; predefined modules</span></a>
<a class="sourceLine" id="cb1-477" title="477">        (<span class="ex">define</span><span class="fu"> </span>(multiply x y) (* x y))) </a>
<a class="sourceLine" id="cb1-478" title="478"><span class="co">;; the final module can be imported and used in our program</span></a>
<a class="sourceLine" id="cb1-479" title="479">(module number-squarer <span class="op">=</span> (squaring-functor nums)) </a>
<a class="sourceLine" id="cb1-480" title="480"></a>
<a class="sourceLine" id="cb1-481" title="481">(import number-squarer)</a>
<a class="sourceLine" id="cb1-482" title="482">(square <span class="dv">3</span>)              <span class="co">;; =&gt; 9</span></a>
<a class="sourceLine" id="cb1-483" title="483"></a>
<a class="sourceLine" id="cb1-484" title="484"><span class="co">;; We can instantiate the functor for other inputs</span></a>
<a class="sourceLine" id="cb1-485" title="485"><span class="co">;; Here&#39;s another example module that can be passed to squaring-functor</span></a>
<a class="sourceLine" id="cb1-486" title="486">(module stars (multiply)</a>
<a class="sourceLine" id="cb1-487" title="487">        (import chicken scheme)  <span class="co">;; chicken module for the &#39;use&#39; keyword</span></a>
<a class="sourceLine" id="cb1-488" title="488">        (use srfi<span class="dv">-1</span>)             <span class="co">;; we can use external libraries in our module</span></a>
<a class="sourceLine" id="cb1-489" title="489">        (<span class="ex">define</span><span class="fu"> </span>(multiply x y)</a>
<a class="sourceLine" id="cb1-490" title="490">          (list-tabulate x (<span class="kw">lambda</span> _ (list-tabulate y (<span class="kw">lambda</span> _ &#39;*))))))</a>
<a class="sourceLine" id="cb1-491" title="491">(module star-squarer <span class="op">=</span> (squaring-functor stars))</a>
<a class="sourceLine" id="cb1-492" title="492"></a>
<a class="sourceLine" id="cb1-493" title="493">(import star-squarer)</a>
<a class="sourceLine" id="cb1-494" title="494">(square <span class="dv">3</span>)              <span class="co">;; =&gt; ((* * *)(* * *)(* * *))</span></a></code></pre></div>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="http://wiki.call-cc.org/man/4/The%20User%27s%20Manual">CHICKEN User’s Manual</a>.</li>
<li><a href="http://www.schemers.org/Documents/Standards/R5RS">R5RS standards</a></li>
</ul>
<h2 id="extra-info">Extra Info</h2>
<ul>
<li><a href="http://wiki.call-cc.org/chicken-for-programmers-of-other-languages">For programmers of other languages</a></li>
<li><a href="http://plr.sourceforge.net/cgi-bin/plr/launch.py">Compare CHICKEN syntax with other languages</a></li>
</ul>
</body>
</html>
